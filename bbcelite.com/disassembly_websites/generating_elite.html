<?php
include_once("../templates/template_functions.php");
page_header("disassembly_websites", "generating_elite.html", "Generating source code repositories for Elite", "Generating source code repositories for Elite", "Producing seven different source codes for Elite from a central a library repository", "archaeology", "disassembly_websites", "generating_elite");
?>
				<!-- Start of article -->
				<div class="codeBlockWrapper nav">
					<nav class="codeBlock previousNext"><a class="previous" rel="prev" title="Previous page" href="generating_websites.html">Generating websites from source code</a><a class="next" rel="next" title="Next page" href="comparing_elite.html">Generating code comparisons</a></nav>
				</div>

				<div class="codeBlockWrapper">
					<div class="codeBlock article">
						<h2 class="articleSubheader deepDive">Producing seven different versions of Elite from a central library repository</h2>

						<p>The article on <a href="generating_websites.html">generating websites from source code</a> explains how I generate the Aviator, Revs and Lander websites from their corresponding source code repositories. But what about the Elite site?</p>

						<p>In terms of the source code pages that are common to all my disassembly sites, the same approach is used. Just as in the other sites, the mammoth <a href="https://github.com/markmoxon/bbcelite-scripts/blob/main/disassembly-website-generator/create-disassembly-websites.py">create-disassembly-websites.py</a> script takes each of the Elite source code repositories - one for each version of Elite - and generates HTML pages containing the source code, all marked-up and cross-referenced and ready to deploy to the website along with the static website content from the <a href="https://github.com/markmoxon/bbcelite-websites/">bbc-websites</a> repository. There is one extra function call that supports the addition of a comparison link to the subroutine headers, but apart from that the process is the same.</p>

						<p>There's an awful lot more going on with the Elite site, though, and that's what we're going to look at here.</p>

						<h2 class="articleSubheader">What the scripts do<br />
													 -------------------</h2>

						<p>As discussed in the <a href="overview.html">overview</a>, here's the flowchart for producing the Elite site:</p>

<pre class="articleIndented">                +---- <a href="https://github.com/markmoxon/library-elite-beebasm">library-elite-beebasm</a> -----+             <a href="https://github.com/markmoxon/bbcelite-websites/">bbc-websites</a>
                |                                |                   |
                |                                |                   |
   <a href="https://github.com/markmoxon/bbcelite-scripts/blob/main/elite-repository-generator/create-elite-repositories.py">create-elite-repositories.py</a>                  |                   |
                |                                |                   |
                |                                |                   |
                v                                |                   |
       <a href="https://github.com/markmoxon/6502sp-elite-beebasm">6502sp-elite-beebasm</a>                      |                   |
      <a href="https://github.com/markmoxon/cassette-elite-beebasm">cassette-elite-beebasm</a>                     |                   |
        <a href="https://github.com/markmoxon/disc-elite-beebasm">disc-elite-beebasm</a>        <a href="https://github.com/markmoxon/bbcelite-scripts/blob/main/disassembly-website-generator/create-disassembly-websites.py">create-disassembly-websites.py</a>     |
       <a href="https://github.com/markmoxon/master-elite-beebasm">master-elite-beebasm</a>                      |                   |
      <a href="https://github.com/markmoxon/electron-elite-beebasm">electron-elite-beebasm</a>                     |                   |
        <a href="https://github.com/markmoxon/nes-elite-beebasm">nes-elite-beebasm</a>                        |                   |
         <a href="https://github.com/markmoxon/elite-a-beebasm">elite-a-beebasm</a>                         |                   |
                |                                |                   |
                |                                |                   |
  <a href="https://github.com/markmoxon/bbcelite-scripts/blob/main/disassembly-website-generator/create-disassembly-websites.py">create-disassembly-websites.py</a>                 |                   |
                |                                |                   |
                |                                |                   |
                |                                |                   |
  +-------------|-- <a href="https://elite.bbcelite.com/">elite.bbcelite.com</a> website --|-------------------|------+
  |             |                                |                   |      |
  |             |                                |                   v      |
  |             v                                |                          |
  |                                              v               <a href="https://elite.bbcelite.com/">Homepage</a>   |
  |         <a href="https://elite.bbcelite.com/cassette/articles/map_of_the_source_code.html">Code pages</a>                                          <a href="https://elite.bbcelite.com/about_site/quick_start_guide.html">About site</a>  |
  |           <a href="https://elite.bbcelite.com/cassette/indexes/a-z.html">Indexes</a>                     <a href="https://elite.bbcelite.com/compare/indexes/shared_code_standard.html">Code comparisons</a>      <a href="https://elite.bbcelite.com/deep_dives/">Deep dives</a>  |
  |         <a href="https://elite.bbcelite.com/cassette/articles/source_code_statistics.html">Statistics</a>                                             <a href="https://elite.bbcelite.com/hacks/">Hacks</a>    |
  |                                                            <a href="https://elite.bbcelite.com/cassette/">Version info</a> |
  |                                                            <a href="https://elite.bbcelite.com/compare/versions_of_elite.html">Compare info</a> |
  |                                                                         |
  +-------------------------------------------------------------------------+
</pre>

						<p>In the bottom-left corner you can see the same generation process that's used to produce the other sites - the <a href="https://github.com/markmoxon/bbcelite-scripts/blob/main/disassembly-website-generator/create-disassembly-websites.py">create-disassembly-websites.py</a> script ingests the source code from a repository, and generates the code pages, indexes and statistics pages, just like the Aviator, Revs and Lander sites. The only difference here is that there are seven source code repositories, one for each version of Elite, so for Elite we just run the script seven times, passing a different parameter to the script on each run.</p>

						<p>On the right side you can see the same process of combining the generated content with the static content from the <a href="https://github.com/markmoxon/bbcelite-websites/">bbc-websites</a> repository - that's the same as in the other sites, too, there's just more hand-crafted content. The idea is the same, though.</p>

						<p>There are two new processes in this flowchart, though:</p>

						<ul>
							<li>In the top-left corner, the <a href="https://github.com/markmoxon/bbcelite-scripts/blob/main/elite-repository-generator/create-elite-repositories.py">create-elite-repositories.py</a> script generated the contents of the seven source code repositories from the contents of the <a href="https://github.com/markmoxon/library-elite-beebasm">library-elite-beebasm</a> repository. In the other sites the source code repositories are hand-crafted, but in Elite they are generated by script.</li>

							<li>In the middle column, the <a href="https://github.com/markmoxon/bbcelite-scripts/blob/main/disassembly-website-generator/create-disassembly-websites.py">create-disassembly-websites.py</a> script that we used to create source code pages also produces the compare section of the website, but this time it ingests the content from the <a href="https://github.com/markmoxon/library-elite-beebasm">library-elite-beebasm</a> repository.</li>
						</ul>

						<p>We're going to look at the first of these in this article, and you can read about the second in the article on <a href="comparing_elite.html">generating code comparisons for Elite</a>, but first let's take a quick look at the shell script that joins everything in the flowchart together.</p>

						<h2 class="articleSubheader">A deeper look at the website generation process<br />
													 -----------------------------------------------</h2>

						<p>The Elite site is updated by running the <a href="https://github.com/markmoxon/bbcelite-scripts/blob/main/generate-elite.sh">generate-elite.sh</a> script. As with the other sites, if you want to have a go at running this process yourself, then the <a href="https://github.com/markmoxon/bbcelite-scripts">bbcelite-scripts</a> repository contains step-by-step instructions on setting up and running the scripts yourself. The process has been built on a Mac, but it wouldn't take much effort to get it working on Linux or Windows.</p>

						<p>This shell script is quite a bit bigger than the equivalent scripts for Aviator, Revs and Lander, but the structure is pretty similar - it just looks bigger because the Elite site is effectively seven websites rolled into one.</p>

						<p>It starts by running the <a href="https://github.com/markmoxon/bbcelite-scripts/blob/main/elite-repository-generator/create-elite-repositories.py">create-elite-repositories.py</a> script to generate the seven source code repositories from the library repository (see the next section for more details). It then syncs the results to each of the seven repositories themselves.</p>

						<p>It then generates the seven source code sections in the website, by calling the <a href="https://github.com/markmoxon/bbcelite-scripts/blob/main/disassembly-website-generator/create-disassembly-websites.py">create-disassembly-websites.py</a> script seven times, each time with a different parameter:</p>

<pre class="articleIndented">  python3 create-disassembly-websites.py cassette
  python3 create-disassembly-websites.py disc
  python3 create-disassembly-websites.py 6502sp
  python3 create-disassembly-websites.py master
  python3 create-disassembly-websites.py electron
  python3 create-disassembly-websites.py elite-a
  python3 create-disassembly-websites.py nes
</pre>

						<p>This generates the seven different source code sections of the Elitewebsite, using the exact same process as for Aviator, Revs and Lander (see the articles on <a href="generating_websites.html">generating websites from source code</a> for details).</p>

						<p>The shell script then runs the script once more, but this time with an argument of "compare":</p>

<pre class="articleIndented">  python3 create-disassembly-websites.py compare
</pre>

						<p>This generates the comparison section for the Elite site - see the article on <a href="comparing_elite.html">generating code comparisons for Elite</a> for more details. The results are then synced to the website folders, and we're done.</p>

						<p>For the rest of this article, let's take a look at how the script generates the seven source code repositories from the library repository.</p>

						<h2 class="articleSubheader">Generating source code from the library<br />
													 ---------------------------------------</h2>

						<p>xxx</p>

create-elite-repositories.py
Elite-A
Different delimiters and hex prefixes
					</div>
				</div>

				<div class="codeBlockWrapper nav">
					<nav class="codeBlock previousNext"><a class="previous" rel="prev" title="Previous page" href="generating_websites.html">Generating websites from source code</a><a class="next" rel="next" title="Next page" href="comparing_elite.html">Generating code comparisons</a></nav>
				</div>
				<!-- End of article -->
			</article>

<?php
include_once("../templates_local/navigation.php");

?>
		</div>
	</body>
</html>
