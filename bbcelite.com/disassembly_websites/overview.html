<?php
include_once("../templates/template_functions.php");
page_header("disassembly_websites", "overview.html", "An overview of my automated scripts", "An overview of my automated scripts", "How I automate my disassembly sites and source code repositories", "archaeology", "disassembly_websites", "overview");
?>
				<div class="codeBlockWrapper nav">
					<nav class="codeBlock previousNext"><a class="previous" rel="prev" title="Previous page" href="index.html">Why I auto-generate my websites</a><a class="next" rel="next" title="Next page" href="generating_websites.html">Generating websites from source code</a></nav>
				</div>

				<div class="codeBlockWrapper">
					<div class="codeBlock article">
						<h2 class="articleSubheader deepDive">How I automated my disassembly sites and source repositories</h2>

						<p>My disassembly websites are generated by a combination of GitHub repositories and Python scripts; every single page, image, web script and download comes from a repository of some form.</p>

						<p>In this article I'll give an overview of how this generation process works. You can dive more deeply into the scripts themselves in the articles on <a href="generating_websites.html">generating websites from source code</a>, <a href="generating_elite.html">generating source code repositories for Elite</a> and <a href="comparing_elite.html">generating code comparisons for Elite</a>, but here's a quick summary of how the scripts and repositories work together to create the websites you are reading today.</p>

						<p>Incidentally, if you want to have a go at running this process yourself, then the <a href="https://github.com/markmoxon/bbcelite-scripts">bbcelite-scripts</a> repository contains step-by-step instructions on setting up and running the scripts yourself. The process has been built on a Mac, but it wouldn't take much effort to get it working on Linux or Windows.</p>

						<h2 class="articleSubheader">Generating websites from source code repositories<br>
													 -------------------------------------------------</h2>

						<p>First let's talk about how the simpler websites are generated, i.e. the sites for <a href="https://aviator.bbcelite.com">Aviator</a>, <a href="https://revs.bbcelite.com">Revs</a> and <a href="https://lander.bbcelite.com">Lander</a>.</p>

						<p>For each of these projects, I've hand-built a repository containing the fully buildable and fully documented source code. These are the repositories:</p>

						<ul>
							<li><a href="https://github.com/markmoxon/aviator-source-code-bbc-micro">aviator-source-code-bbc-micro</a></li>

							<li><a href="https://github.com/markmoxon/revs-source-code-bbc-micro">revs-source-code-bbc-micro</a></li>

							<li><a href="https://github.com/markmoxon/lander-source-code-acorn-archimedes">lander-source-code-acorn-archimedes</a></li>
						</ul>

						<p>These repositories all have the same folder structure and a similar build process, though the Lander repository is in ARM assembly while Aviator and Revs are 6502 assembly. In terms of building the websites from the source, they all work in the same way, so let's look at just one example: Aviator.</p>

						<p>The core script that creates my websites is <a href="https://github.com/markmoxon/bbcelite-scripts/blob/main/disassembly-website-generator/create-disassembly-websites.py">create-disassembly-websites.py</a>. This was the first script I wrote back in September 2020, and it shows; it has grown organically, shall we say, so don't expect beautiful code. It does work well, however.</p>

						<p>The script ingests the relevant source code repository - <a href="https://github.com/markmoxon/aviator-source-code-bbc-micro">aviator-source-code-bbc-micro</a> in the case of Aviator - and creates HTML pages that cover the entire source code, all cross-referenced and linked, and with popup information for every operand (i.e. every variable, subroutine, constant and so on). The script also generates indexes to the source, plus a set of statistics broken down by category and type.</p>

						<p>The hand-crafted content on the Aviator site comes from the <a href="https://github.com/markmoxon/bbcelite-websites/">bbcelite-websites</a> repository, which covers the homepage, deep dives, site information and version pages. This gets combined with the output from the Python script, and the result is the <a href="https://aviator.bbcelite.com">complete Aviator website</a>.</p>

						<p>Here's a flowchart of how this works:</p>

<pre class="articleIndented">
  <a href="https://github.com/markmoxon/aviator-source-code-bbc-micro">aviator-source-code-bbc-micro</a>                       <a href="https://github.com/markmoxon/bbcelite-websites/">bbcelite-websites</a>
                |                                             |
                |                                             |
  <a href="https://github.com/markmoxon/bbcelite-scripts/blob/main/disassembly-website-generator/create-disassembly-websites.py">create-disassembly-websites.py</a>                              |
                |                                             |
                |                                             |
                |                                             |
  +-------------|-------- <a href="https://aviator.bbcelite.com/">aviator.bbcelite.com</a> website -------|-------------+
  |             |                                             |             |
  |             v                                             v             |
  |                                                                         |
  |         <a href="https://aviator.bbcelite.com/source/articles/map_of_the_source_code.html">Code pages</a>                                    <a href="https://aviator.bbcelite.com/">Homepage</a>          |
  |           <a href="https://aviator.bbcelite.com/source/indexes/a-z.html">Indexes</a>                                    <a href="https://aviator.bbcelite.com/about_site/quick_start_guide.html">About site</a>         |
  |         <a href="https://aviator.bbcelite.com/source/articles/source_code_statistics.html">Statistics</a>                                   <a href="https://aviator.bbcelite.com/deep_dives/">Deep dives</a>         |
  |                                                     <a href="https://aviator.bbcelite.com/source/">Version info</a>        |
  |                                                                         |
  +-------------------------------------------------------------------------+
</pre>

						<p>The exact same process builds the Revs and Lander websites, and you can read all about how the script works in the article on <a href="generating_websites.html">generating websites from source code</a>.</p>

						<h2 class="articleSubheader">Generating source code repositories from the library<br>
													 ----------------------------------------------------</h2>

						<p>Things are rather more complicated for the Elite website. Not only is there an additional step - that of generating the source code repositories from the library repository - but there is an additional section that compares the code of the different Acornsoft versions, and that's automatically generated too.</p>

						<p>Here's the flowchart for the Elite site:</p>

<pre class="articleIndented">                +-- <a href="https://github.com/markmoxon/elite-source-code-library">elite-source-code-library</a> ---+           <a href="https://github.com/markmoxon/bbcelite-websites/">bbcelite-websites</a>
                |                                |                   |
                |                                |                   |
   <a href="https://github.com/markmoxon/bbcelite-scripts/blob/main/elite-repository-generator/create-elite-repositories.py">create-elite-repositories.py</a>                  |                   |
                |                                |                   |
                |                                |                   |
                v                                |                   |
  <a href="https://github.com/markmoxon/elite-source-code-bbc-micro-cassette">elite-source-code-bbc-micro-cassette</a>           |                   |
    <a href="https://github.com/markmoxon/elite-source-code-bbc-micro-disc">elite-source-code-bbc-micro-disc</a>             |                   |
    <a href="https://github.com/markmoxon/elite-source-code-acorn-electron">elite-source-code-acorn-electron</a>             |                   |
<a href="https://github.com/markmoxon/elite-source-code-6502-second-processor">elite-source-code-6502-second-processor</a>          |                   |
     <a href="https://github.com/markmoxon/elite-source-code-commodore-64">elite-source-code-commodore-64</a>              |                   |
       <a href="https://github.com/markmoxon/elite-source-code-apple-ii">elite-source-code-apple-ii</a>                |                   |
      <a href="https://github.com/markmoxon/elite-source-code-bbc-master">elite-source-code-bbc-master</a>               |                   |
         <a href="https://github.com/markmoxon/elite-source-code-nes">elite-source-code-nes</a>                   |                   |
     <a href="https://github.com/markmoxon/elite-a-source-code-bbc-micro">elite-a-source-code-bbc-micro</a>               |                   |
                |                                |                   |
                |                                |                   |
                |                                |                   |
  <a href="https://github.com/markmoxon/bbcelite-scripts/blob/main/disassembly-website-generator/create-disassembly-websites.py">create-disassembly-websites.py</a>   <a href="https://github.com/markmoxon/bbcelite-scripts/blob/main/disassembly-website-generator/create-disassembly-websites.py">create-disassembly-websites.py</a>    |
                |                                |                   |
                |                                |                   |
                |                                |                   |
  +-------------|-- <a href="https://elite.bbcelite.com/">elite.bbcelite.com</a> website --|-------------------|------+
  |             |                                |                   |      |
  |             |                                |                   v      |
  |             v                                |                          |
  |                                              v               <a href="https://elite.bbcelite.com/">Homepage</a>   |
  |         <a href="https://elite.bbcelite.com/cassette/articles/map_of_the_source_code.html">Code pages</a>                                          <a href="https://elite.bbcelite.com/about_site/quick_start_guide.html">About site</a>  |
  |           <a href="https://elite.bbcelite.com/cassette/indexes/a-z.html">Indexes</a>                     <a href="https://elite.bbcelite.com/compare/indexes/shared_code_standard.html">Code comparisons</a>      <a href="https://elite.bbcelite.com/deep_dives/">Deep dives</a>  |
  |         <a href="https://elite.bbcelite.com/cassette/articles/source_code_statistics.html">Statistics</a>                                             <a href="https://elite.bbcelite.com/hacks/">Hacks</a>    |
  |                                                            <a href="https://elite.bbcelite.com/cassette/">Version info</a> |
  |                                                            <a href="https://elite.bbcelite.com/compare/versions_of_elite.html">Compare info</a> |
  |                                                                         |
  +-------------------------------------------------------------------------+
</pre>

						<p>On the simpler Aviator website we looked at earlier, all of the website content comes from just two sources: the game's source code comes from the <a href="https://github.com/markmoxon/aviator-source-code-bbc-micro">aviator-source-code-bbc-micro</a> repository, while the static website content comes from the <a href="https://github.com/markmoxon/bbcelite-websites/">bbcelite-websites</a> repository. It's similar on the Elite website, except the source code comes from the <a href="https://github.com/markmoxon/elite-source-code-library">elite-source-code-library</a> repository.</p>

						<p>The library repository is different, though, as it contains source code for nine different versions of Elite, compared to just one version in the Aviator repository. So the first step when building the Elite website is to run the second Python script that I wrote, <a href="https://github.com/markmoxon/bbcelite-scripts/blob/main/elite-repository-generator/create-elite-repositories.py">create-elite-repositories.py</a>, which takes the library repository and generates nine self-contained source code repositories, one for each version of Elite. These nine repositories can then be converted into websites by the same <a href="https://github.com/markmoxon/bbcelite-scripts/blob/main/disassembly-website-generator/create-disassembly-websites.py">create-disassembly-websites.py</a> script that we use to generate the sites for Aviator, Revs and Lander.</p>

						<p>The same script is also used to generate the comparison section of the Elite site. This compares the different versions of Elite in a side-by-side view, showing all the code differences between the five Acornsoft versions (the comparison section omits Elite-A, and Elite on the Commodore 64, Apple II and NES; Elite-A uses a more suitable comment-based approach to highlight its variations from the original, and I felt that adding the non-Acorn versions of Elite into the mix would make the comparison too cluttered). The script generates the comparison section directly from the library repository, as the library contains all the versions in one place.</p>

						<p>Finally, the generated content (all 7,482 pages of it) is merged with the 171 hand-crafted pages from the <a href="https://github.com/markmoxon/bbcelite-websites/">bbcelite-websites</a> repository, which contains the homepage, deep dives, site information, hacks section and version pages. The result is the <a href="https://elite.bbcelite.com">complete Elite website</a>... all 7,653 pages of it.</p>

						<p>For more information on how the scripts work, see the articles on <a href="generating_websites.html">generating websites from source code</a>, <a href="generating_elite.html">generating source code repositories for Elite</a> and <a href="comparing_elite.html">generating code comparisons for Elite</a>.</p>
					</div>
				</div>

				<div class="codeBlockWrapper nav">
					<nav class="codeBlock previousNext"><a class="previous" rel="prev" title="Previous page" href="index.html">Why I auto-generate my websites</a><a class="next" rel="next" title="Next page" href="generating_websites.html">Generating websites from source code</a></nav>
				</div>
			</article>

<?php
include_once("../templates_local/navigation.php");

?>
		</div>
	</body>
</html>
