<?php
include_once("../templates/template_functions.php");
page_header("about_site", "to-do_list.html", "To-do list", "To-do list", "Code that could benefit from a bit more analysis", "revs", "about_site", "to-do_list");
?>
				<div class="codeBlockWrapper nav">
					<nav class="codeBlock previousNext"><a class="previous" rel="prev" title="Previous page" href="site_map.html">Site map</a></nav>
				</div>

				<div class="codeBlockWrapper">
					<div class="codeBlock article">
						<p>I have documented every byte of the Revs game code, but that doesn't mean that I've fully <i>understood</i> every byte (though it's close). Almost every single aspect of the code is explained, but there are a few issues that could benefit from another look.</p>

						<p>This page lists all of the outstanding issues of which I am aware. These are the notes I made as I analysed the source, so they are fairly terse and might not be terribly clear.</p>

						<h2 class="articleSubheader">3D objects<br>
						                             ----------</h2>

						<ul>
							<li><a href="/source/main/subroutine/getobjectdistance.html">GetObjectDistance</a>: Explain algorithm, is it a Pythagoras hack?</li>
							<li><a href="/source/main/subroutine/buildplayercar.html">BuildPlayerCar</a>: Why build 2 car objects (segmentIndex96 for 3D coords in xPlayerCoord, next segment for YawAngle angle in playerYawAngleHi)?</li>
							<li><a href="/source/main/subroutine/getobjyawangle_part_2_of_4.html">GetObjYawAngle (Part 2 of 4)</a>: Explain algorithm, use of T in Divide8x8</li>
							<li><a href="/source/main/subroutine/getobjyawangle_part_3_of_4.html">GetObjYawAngle (Part 3 of 4)</a>: Explain algorithm, use of T in Divide8x8</li>
							<li><a href="/source/main/subroutine/getobjyawangle_part_4_of_4.html">GetObjYawAngle (Part 4 of 4)</a>: Explain algorithm, use of T in Divide8x8</li>
							<li><a href="/source/main/subroutine/getobjpitchangle.html">GetObjPitchAngle</a>: Explain algorithm, use of T in Divide8x8</li>
							<li><a href="/source/main/subroutine/comparesegments.html">CompareSegments</a>: Not sure what H is used for</li>
							<li><a href="/source/main/subroutine/buildcarobjects_part_2_of_3.html">BuildCarObjects (Part 2 of 3)</a>: Explain algorithm better for positioning car on track</li>
							<li><a href="/source/main/subroutine/setobjectdetails.html">SetObjectDetails</a>: Explain the scaleUp/scaleDown maths</li>
							<li><a href="/source/main/subroutine/buildroadsign.html">BuildRoadSign</a>: Explain A &lt; 64 test for moving on to next sign in section, and A &lt; 110 for different collision distance</li>
						</ul>

						<h2 class="articleSubheader">Brands Hatch<br>
						                             ------------</h2>

						<ul>
							<li><a href="/source/brands_hatch/subroutine/hookupdatehorizon.html">HookUpdateHorizon</a>: Explain effect on game</li>
							<li><a href="/source/brands_hatch/subroutine/hookflattenhills.html">HookFlattenHills</a>: Explain effect on game</li>
							<li><a href="/source/brands_hatch/subroutine/hookfixhorizon.html">HookFixHorizon</a>: Explain effect on game</li>
						</ul>

						<h2 class="articleSubheader">Car geometry<br>
						                             ------------</h2>

						<ul>
							<li><a href="/source/main/subroutine/moveplayerback.html">MovePlayerBack</a>: Explain why we set resetSectionList to a non-zero value here (is it just for efficiency?)</li>
							<li><a href="/source/main/subroutine/processovertaking_part_1_of_3.html">ProcessOvertaking (Part 1 of 3)</a>: Explain H and why it rotates left - it does nothing?</li>
							<li><a href="/source/main/subroutine/moveplayerontrack.html">MovePlayerOnTrack</a>: Explain algorithm for calculating progress and racing line from angle</li>
							<li><a href="/source/main/subroutine/getcarinsegment.html">GetCarInSegment</a>: Explain algorithm</li>
							<li><a href="/source/main/subroutine/scalecarinsegment.html">ScaleCarInSegment</a>: Explain algorithm, is this some kind of trigonometry approximation?</li>
						</ul>

						<h2 class="articleSubheader">Dashboard<br>
						                             ---------</h2>

						<ul>
							<li><a href="/source/main/variable/filldataoffset.html">fillDataOffset</a>: Could be better explained</li>
							<li><a href="/source/main/subroutine/updatedashboard.html">UpdateDashboard</a>: Could be clearer</li>
							<li><a href="/source/main/subroutine/drawrevcounter.html">DrawRevCounter</a>: Could be clearer</li>
							<li><a href="/source/main/subroutine/drawdashboardline.html">DrawDashboardLine</a>: Could be clearer</li>
							<li><a href="/source/main/subroutine/drawcornermarkers.html">DrawCornerMarkers</a>: Explain scaleUp and coordinate calculations</li>
						</ul>

						<h2 class="articleSubheader">Drawing objects<br>
						                             ---------------</h2>

						<ul>
							<li><a href="/source/main/subroutine/drawobjectedge_part_1_of_5.html">DrawObjectEdge (Part 1 of 5)</a>: How do we end up with double thickness and/or thin edges in final output?</li>
							<li><a href="/source/main/subroutine/drawobjectedge_part_2_of_5.html">DrawObjectEdge (Part 2 of 5)</a>: And edges going higher/lower than their fills? (object 6, 7)</li>
							<li><a href="/source/main/subroutine/drawobjectedge_part_3_of_5.html">DrawObjectEdge (Part 3 of 5)</a>: Unsure about the role of L and edgePixelMask in extra edges in draw12</li>
							<li><a href="/source/main/subroutine/drawobjectedge_part_4_of_5.html">DrawObjectEdge (Part 4 of 5)</a>: How do fill colours in four-edge lines work? Green? %11? (object 2, 4)</li>
							<li><a href="/source/main/subroutine/fillinsideobject.html">FillInsideObject</a>: Explain why we subtract and add T to block addresses</li>
							<li><a href="/source/main/subroutine/drawobjectedges.html">DrawObjectEdges</a>: Explain initial values that are passed to DrawObjectEdge at drob1 better</li>
						</ul>

						<h2 class="articleSubheader">Drawing the track<br>
						                             -----------------</h2>

						<ul>
							<li><a href="/source/main/subroutine/mapsegmentstolines.html">MapSegmentsToLines</a>: Explain algorithm fully, is N about hills?</li>
							<li><a href="/source/main/subroutine/drawvergeedge.html">DrawVergeEdge</a>: Explain C flag and A values passed to DrawVergeEdge by DrawTrack for the various verge types</li>
							<li><a href="/source/main/subroutine/drawtrack.html">DrawTrack</a>: How do we draw *four* edges if the first call is only setting up variables and not drawing? Are we drawing spaces between edges? verge - track - verge?</li>
							<li><a href="/source/main/subroutine/setvergebackground.html">SetVergeBackground</a>: Explain algorithm, return value of Y, X argument value</li>
							<li><a href="/source/main/subroutine/drawsegmentedge_part_1_of_7.html">DrawSegmentEdge (Part 1 of 7)</a>: Explain algorithm</li>
							<li><a href="/source/main/subroutine/drawsegmentedge_part_2_of_7.html">DrawSegmentEdge (Part 2 of 7)</a>: Explain algorithm, what is the scaling of SS and TT all about?</li>
							<li><a href="/source/main/subroutine/drawsegmentedge_part_3_of_7.html">DrawSegmentEdge (Part 3 of 7)</a>: Explain algorithm, modifications (which seem the wrong way round somehow as far as WW is concerned)</li>
							<li><a href="/source/main/subroutine/drawsegmentedge_part_4_of_7.html">DrawSegmentEdge (Part 4 of 7)</a>: Explain all the colour bits %ab etc.</li>
							<li><a href="/source/main/subroutine/drawsegmentedge_part_5_of_7.html">DrawSegmentEdge (Part 5 of 7)</a>: Explain setting of X (pixel number within 2 bytes), and (S R), (Q P) seem to point to the addresses of the start of the previous edge, not the end of the previous edge?</li>
							<li><a href="/source/main/subroutine/drawsegmentedge_part_6_of_7.html">DrawSegmentEdge (Part 6 of 7)</a>: Explain modifications to DrawGrass routines, plus mods to drawing routines; At dver22 we kick off the drawing with the opposite to the chosen INY/DEY in modifications, so is this taking a step back before charging forwards?</li>
							<li><a href="/source/main/subroutine/drawsegmentedge_part_7_of_7.html">DrawSegmentEdge (Part 7 of 7)</a>: Explain algorithm</li>
							<li><a href="/source/main/subroutine/drawsteeptoleft.html">DrawSteepToLeft</a>: Explain the need to move on by one track line for setting the background colour</li>
							<li><a href="/source/main/subroutine/updatebackground.html">UpdateBackground</a>: Explain algorithm</li>
							<li><a href="/source/main/variable/vergepixelmask.html">vergePixelMask</a>: Explain these combinations - some seem wrong</li>
						</ul>

						<h2 class="articleSubheader">Drivers<br>
						                             -------</h2>

						<ul>
							<li><a href="/source/main/subroutine/updatelaptimers.html">UpdateLapTimers</a>: Explain current lap calculation, why is firstLapStarted incremented</li>
							<li><a href="/source/main/subroutine/updatelaps.html">UpdateLaps</a>: Explain driverLapNumber BMI test, driver number being > current player in practice</li>
							<li><a href="/source/main/subroutine/awardracepoints.html">AwardRacePoints</a>: Explain multi-player algorithm</li>
							<li><a href="/source/main/variable/firstlapstarted.html">firstLapStarted</a>: Why is this decremented in laps4?</li>
						</ul>

						<h2 class="articleSubheader">Driving model<br>
						                             -------------</h2>

						<ul>
							<li><a href="/source/main/subroutine/applyelevation_part_2_of_5.html">ApplyElevation (Part 2 of 5)</a>: Explain playerHeading algorithm</li>
							<li><a href="/source/main/subroutine/applyelevation_part_3_of_5.html">ApplyElevation (Part 3 of 5)</a>: Explain height calculation in A</li>
							<li><a href="/source/main/subroutine/applytyreforces.html">ApplyTyreForces</a>: Explain algorithm</li>
							<li><a href="/source/main/subroutine/applyskidforces.html">ApplySkidForces</a>: Explain algorithm</li>
							<li><a href="/source/main/subroutine/applygrassortrack.html">ApplyGrassOrTrack</a>: Explain brake force and wing balance</li>
						</ul>

						<h2 class="articleSubheader">Keyboard<br>
						                             --------</h2>

						<ul>
							<li><a href="/source/main/subroutine/processdrivingkeys_part_2_of_6.html">ProcessDrivingKeys (Part 2 of 6)</a>: Explain xTyreForce and Superior vs Acornsoft</li>
						</ul>

						<h2 class="articleSubheader">Maths<br>
						                             -----</h2>

						<ul>
							<li><a href="/source/main/subroutine/divide8x8.html">Divide8x8</a>: Explain effect of initial value of T on result</li>
						</ul>

						<h2 class="articleSubheader">Screen buffer<br>
						                             -------------</h2>

						<ul>
							<li><a href="/source/main/subroutine/getcolour_part_1_of_3.html">GetColour (Part 1 of 3)</a>: Explain algorithm, &AA markers</li>
							<li><a href="/source/main/subroutine/getcolour_part_2_of_3.html">GetColour (Part 2 of 3)</a>: Explain algorithm, &AA markers</li>
							<li><a href="/source/main/subroutine/getcolour_part_3_of_3.html">GetColour (Part 3 of 3)</a>: Explain algorithm, &AA markers</li>
							<li><a href="/source/main/subroutine/setmarker.html">SetMarker</a>: Explain the whole &AA marker thing, see DrawObjectEdge (Part 4 of 5)</li>
							<li><a href="/source/main/subroutine/getcoloursup.html">GetColourSup</a>: Explain algorithm</li>
						</ul>

						<h2 class="articleSubheader">Text<br>
						                             ----</h2>

						<ul>
							<li><a href="/source/main/subroutine/updatepositioninfo.html">UpdatePositionInfo</a>: Explain how positionChange works</li>
						</ul>

						<h2 class="articleSubheader">Track geometry<br>
						                             --------------</h2>

						<ul>
							<li><a href="/source/main/subroutine/getsegmentsteering.html">GetSegmentSteering</a>: Explain the use of prev in this algorithm (see deep dive)</li>
							<li><a href="/source/main/subroutine/getsectionangles_part_2_of_3.html">GetSectionAngles (Part 2 of 3)</a>: Why do we want horizonSection to contain the higher index of sections with the same height? Explain prevHorizonIndex <= 7 logic</li>
							<li><a href="/source/main/subroutine/getvergeandmarkers_part_1_of_4.html">GetVergeAndMarkers (Part 1 of 4)</a>: Why do we skip part 2 when segmentCounter >= 3 - just for efficiency?</li>
						</ul>
					</div>
				</div>

				<div class="codeBlockWrapper nav">
					<nav class="codeBlock previousNext"><a class="previous" rel="prev" title="Previous page" href="site_map.html">Site map</a></nav>
				</div>
			</article>

<?php
include_once("../templates_local/navigation.php");

?>
		</div>
	</body>
</html>
