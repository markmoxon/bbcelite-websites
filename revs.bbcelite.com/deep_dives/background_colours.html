<?php
include_once("../templates/template_functions.php");
page_header("deep_dives", "xx.html", "xx", "xx", "A deep dive into xx in BBC Micro Revs", "revs", "deep_dives_xx", "xx");
?>
				<!-- Start of article -->
				<div class="codeBlockWrapper nav">
					<nav class="codeBlock previousNext"><a class="previous" rel="prev" title="Previous deep dive" href="xx.html">xx</a><a class="next" rel="next" title="Next deep dive" href="xx.html">xx</a></nav>
				</div>

				<div class="codeBlockWrapper">
					<div class="codeBlock article">
						<h2 class="articleSubheader deepDive">xx</h2>

						<p></p>

						<h2 class="articleSubheader">xxx<br />
													 ---</h2>

  backgroundColour gets set by these routines in this order:
    ResetTrackLines (set to 0)
    DrawTrack > UpdateBackground (after each of the four verges)
    DrawTrack > SetVergeBackground (after left verge, after right verge)
    SetBackground

  backgroundColour gets read by these routines:
    GetColour
    GetColourS

  DrawSegmentEdge (Part 4 of 7) - sets backgroundLeft, backgroundRight

    backgroundRight = 010vv0ab - with right colour

    backgroundLeft = 100vv0ab - with left colour

  UpdateBackground - works with backgroundLeft, backgroundRight
  
    Use backgroundRight when edge is fully on-screen
    
    Use backgroundLeft in Y-1 when partially off-screen, if Y-1 is empty
    
    Set to just green or black for sideways orientation

  SetVergeBackground - masks passed in X are used to set values:

    000 00 1 00     after drawing the left verge
    000 10 1 00     after drawing the right verge

  SetBackground - sets backgroundColour to sky, track and grass:

    black:    001 00 0 00     ???   leftVergeStart   ???  black
    grass:    001 00 0 11     ???   leftVergeStart   ???  green
    blue sky: 001 00 0 01     ???   leftVergeStart   ???  blue

  GetColour - does various complex bit masks at gcol1:

    AND 111 01 1 00 then CMP with 010 00 0 00 then BEQ

    010 00 0 00 = UpdateBackground backgroundRight, leftVergeStart/rightVergeStart,
                  not updated by SetVergeBackground
    100 01 0 00 = UpdateBackground backgroundLeft, leftTrackStart/rightGrassStart,
                  not updated by SetVergeBackground
    000 00 1 00 = updated by SetVergeBackground

    AND 000 10 0 00 then BNE = rightVergeStart/rightGrassStart

  GetColourS - only extracts colour bits

<pre class="articleIndented">  
</pre>

						<ul>
							<li></li>

							<li></li>

							<li></li>

							<li></li>
						</ul>

						<ul>
							<li></li>

							<li></li>

							<li>
								<ul>
									<li></li>

									<li></li>

									<li></li>
								</ul>
							</li>
						</ul>

						<table class="spacedTableBorder codeSummary">
							<tr class="codeSummaryHeader"><th>xx</th><th>xx</th><th>xx</th><th>xx</th></tr>
							<tr><td>xx</td><td>xx</td><td>xx</td><td>xx</td></tr>
						</table>
					</div>
				</div>

				<div class="codeBlockWrapper nav">
					<nav class="codeBlock previousNext"><a class="previous" rel="prev" title="Previous deep dive" href="xx.html">xx</a><a class="next" rel="next" title="Next deep dive" href="xx.html">xx</a></nav>
				</div>
				<!-- End of article -->
			</article>

<?php
include_once("../templates_local/navigation.php");

?>
		</div>
	</body>
</html>
