<?php
include_once("../templates/template_functions.php");
page_header("about_site", "to-do_list.html", "To-do list", "To-do list", "Code that could benefit from a bit more analysis", "the_sentinel","about_site", "to-do_list");
?>
				<div class="codeBlockWrapper nav">
					<nav class="codeBlock previousNext"><a class="previous" rel="prev" title="Previous page" href="site_map.html">Site map</a></nav>
				</div>

				<div class="codeBlockWrapper">
					<div class="codeBlock article">
						<p>I have documented every byte of The Sentinel game code, but that doesn't mean that I've fully <i>understood</i> every byte (though it's close). Almost every single aspect of the code is explained, but there are a few issues that could benefit from another look.</p>

						<p>This page lists all of the outstanding issues of which I am aware. These are the notes I made as I analysed the source, so they are fairly terse and might not be terribly clear.</p>

						<h2 class="articleSubheader">Main game loop<br />
						                             --------------</h2>

						<ul>
							<li><a href="/source/main/subroutine/setscannerandpause.html">SetScannerAndPause</a>: Why the pause? This whole routine seems to have been patched into the code as an afterthought</li>
						</ul>

						<h2 class="articleSubheader">Drawing the landscape<br />
						                             ---------------------</h2>

						<ul>
							<li><a href="/source/main/workspace/zero_page.html#quadrantoffset">quadrantOffset</a>: Explain what this is used for</li>
							<li><a href="/source/main/workspace/zero_page.html#viewingquadrantopp">viewingQuadrantOpp</a>: Explain what this is used for</li>
							<li><a href="/source/main/subroutine/drawlandscapeview_part_1_of_3.html">DrawLandscapeView (Part 1 of 3)</a>: Explain uses of quadrantOffset and viewingQuadrantOpp</li>
							<li><a href="/source/main/subroutine/drawlandscapeview_part_3_of_3.html">DrawLandscapeView (Part 3 of 3)</a>: Why does comparing drawViewPitchHi to 2 (after dlan21) mean that we're off-screen?</li>
							<li><a href="/source/main/subroutine/gettileviewedges.html">GetTileViewEdges</a>: Does the logic in this routine make sense? Is my analysis of buffersMinYaw/bufferMinYaw(Hi Lo) incorrect, and therefore the bits in tileIsOnScreen are incorrectly documented in GetTileViewAngles?</li>
							<li><a href="/source/main/subroutine/drawtileandobjects.html">DrawTileAndObjects</a>: Explain uses of quadrantOffset, viewingQuadrantOpp and triangleStartPoint</li>
							<li><a href="/source/main/subroutine/drawslopingtile.html">DrawSlopingTile</a>: Explain triangleStart/triangleStartPoint, and the adding of 16 to A</li>
							<li><a href="/source/main/subroutine/drawtwofacetile.html">DrawTwoFaceTile</a>: Explain the triangleStartPoint and A arguments that are passed from DrawSlopingTile</li>
						</ul>

						<h2 class="articleSubheader">Drawing polygons<br />
						                             ----------------</h2>

						<ul>
							<li><a href="/source/main/subroutine/drawpolygonlines_part_1_of_4.html">DrawPolygonLines (Part 1 of 4)</a>: Why add 96 from bufferOffset(Hi Lo) to the address of the right row buffer in (S R)?</li>
							<li><a href="/source/main/subroutine/drawpolygonlines_part_2_of_4.html">DrawPolygonLines (Part 2 of 4)</a>: Why xPolygonRightEdge = bufferYawWidth * 2 at dpol7 (is bufferYawWidth in "pixels"?)</li>
							<li><a href="/source/main/subroutine/drawpolygonlines_part_3_of_4.html">DrawPolygonLines (Part 3 of 4)</a>: Explain the two similar calculations that "Set Y to the offset within the character row"</li>
							<li><a href="/source/main/subroutine/getpolygonlines_part_1_of_6.html">GetPolygonLines (Part 1 of 6)</a>: Explain trianglePointAdd, triangleStart, Y =+ 2, mod 64 for polygonPoint+2, and how does triangle point logic work?</li>
							<li><a href="/source/main/subroutine/getpolygonlines_part_5_of_6.html">GetPolygonLines (Part 5 of 6)</a>: Clarify INC xPolygonAddrHi logic around choosing left vs right depending on sign of yDelta, why skip horizontal edge count (just before gpol12) when yEdgeDeltaLo = 0?</li>
							<li><a href="/source/main/subroutine/tracepolygonedge_part_2_of_8.html">TracePolygonEdge (Part 2 of 8)</a>, <a href="/source/main/subroutine/tracepolygonedge_part_3_of_8.html">(Part 3 of 8)</a>, <a href="/source/main/subroutine/tracepolygonedge_part_4_of_8.html">(Part 4 of 8)</a>, <a href="/source/main/subroutine/tracepolygonedge_part_5_of_8.html">(Part 5 of 8)</a>, <a href="/source/main/subroutine/tracepolygonedge_part_7_of_8.html">(Part 7 of 8)</a>: Why does the slope error value start at ~(yEdgeDeltaLo / 2) or ~(xEdgeDelta / 2)? Why subtract yEdgeDeltaLo or xEdgeDelta from the slope error?</li>
							<li><a href="/source/main/subroutine/tracepolygonedge_part_7_of_8.html">TracePolygonEdge (Part 7 of 8)</a>: Why increment (A Y) just before tred38? Explain calls to ModifyStoringCode, whole thing needs explaining better</li>
							<li><a href="/source/main/subroutine/tracepolygonedge_part_8_of_8.html">TracePolygonEdge (Part 8 of 8)</a>: Why increment (A Y) just before tred47? Explain calls to ModifyStoringCode, whole thing needs explaining better</li>
							<li><a href="/source/main/subroutine/modifystoringcode.html">ModifyStoringCode</a>: Explain effects of modified code properly</li>
						</ul>

						<h2 class="articleSubheader">Maths (Geometry)<br />
						                             ----------------</h2>

						<ul>
							<li><a href="/source/main/subroutine/getanglefromcoords_part_1_of_3.html">GetAngleFromCoords (Part 1 of 3)</a>, <a href="/source/main/subroutine/getanglefromcoords_part_2_of_3.html">(Part 2 of 3)</a>: Explain the early abort of shift-and-subtract (the BEQ gang10 at gang6) and what this does to bit 5 of the result (the ADC #%00100000 before gang9 and the ORA #%00100000 at the end of part 2)</li>
							<li><a href="/source/main/subroutine/getsightsvector.html">GetSightsVector</a>: Improve pixel-to-angle commentary, explain pitch angle addition of (3 32)</li>
							<li><a href="/source/main/subroutine/gethypotenuseangle.html">GetHypotenuseAngle</a>: Why zero bits 0 and 1 of xDeltaLo to store in W? Explain the quadrant sign changes for the angle around ghyp6 and ghyp10</li>
							<li><a href="/source/main/subroutine/getpitchangledelta.html">GetPitchAngleDelta</a>: Why the 32 in (objectPitchAngle 32)? Explain division by 16</li>
						</ul>

						<h2 class="articleSubheader">Gameplay<br />
						                             --------</h2>

						<ul>
							<li><a href="/source/main/subroutine/scanformeanietree.html">ScanForMeanieTree</a>: Why set minObjWidth = 104 (just before mean5) when morphing a tree to a meanie? Half widths for each are 114 to 74</li>
							<li><a href="/source/main/subroutine/drainobjectenergy.html">DrainObjectEnergy</a>: Why set minObjWidth = 116 (at dobj4) when morphing a boulder to tree? Half widths for each are 122 to 144</li>
						</ul>


						<h2 class="articleSubheader">Screen buffer<br />
						                             -------------</h2>

						<ul>
							<li><a href="/source/main/variable/buffersoffsethi.html">buffersOffsetHi</a>, <a href="/source/main/variable/buffersoffsetlo.html">buffersOffsetLo</a>, <a href="/source/main/variable/xbuffersleft.html">xBuffersLeft</a>, <a href="/source/main/variable/xbufferswidth.html">xBuffersWidth</a>, <a href="/source/main/variable/buffersminyaw.html">buffersMinYaw</a>: What do these values mean?</li>
							<li><a href="/source/main/subroutine/configurebuffer.html">ConfigureBuffer</a>: How do these variables work? Especially the bit 7 flip for bufferMaxYawHi</li>
							<li><a href="/source/main/subroutine/configureobjbuffer.html">ConfigureObjBuffer</a>: How do these variables work? Especially setting bufferMinYaw(Hi Lo), the bit 7 flip for bufferMaxYawHi and xBufferRight</li>
							<li><a href="/source/main/subroutine/ditherscreenbuffer.html">DitherScreenBuffer</a>: Explain why the calculation of ditherStore gives us a random pixel to update</li>
						</ul>
					</div>
				</div>

				<div class="codeBlockWrapper nav">
					<nav class="codeBlock previousNext"><a class="previous" rel="prev" title="Previous page" href="site_map.html">Site map</a></nav>
				</div>
			</article>

<?php
include_once("../templates_local/navigation.php");

?>
		</div>
	</body>
</html>
