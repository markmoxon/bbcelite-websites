<?php
include_once("../../../templates/template_functions.php");
page_header("screen_buffer", "variable_screenbufferhi.html", "The screenBufferHi variable", "Screen buffer: screenBufferHi", "Annotated code for the screenBufferHi variable in The Sentinel", "the_sentinel-code", "source_screen_buffer", "variable_screenbufferhi", "");
?>
				<div class="codeBlockWrapper nav">
					<nav class="codeBlock previousNext"><a class="previous" rel="prev" title="Previous routine" href="/source/main/variable/scrollscreenhi.html">scrollScreenHi</a><a class="next" rel="next" title="Next routine" href="/source/main/variable/screenbufferlo.html">screenBufferLo</a></nav>
				</div>

				<div class="codeBlockWrapper">
<pre class="codeBlock sourceCode initial"><div class="headerBlockWrapper"><div class="headerBlock"><span class="headerLabel">       Name:</span> <span class="headerEntry">screenBufferHi</span>                                          <span class="routineLink">[<a class="extraDataLink" href="#">Show more</a>]</span>
<span class="headerLabel">       Type:</span> <span class="headerEntry">Variable</span>
<span class="headerLabel">   Category:</span> <span class="headerEntry">Screen buffer</span>
<span class="headerLabel">    Summary:</span> <span class="headerEntry">The value to add to scrollScreenHi for each direction to get the</span>
             <span class="headerEntry">high byte of the screen buffer address of the content to scroll in</span>
<div class="extraData"><span class="headerLabel">    Context:</span> <span class="headerEntry">See this variable <a href="/source/all/the_sentinel_g.html#header-screenbufferhi">in context in the source code</a></span>
<span class="headerLabel"> References:</span> <span class="headerEntry">This variable is used as follows:</span>
             <span class="headerEntry">* <a href="/source/main/subroutine/setbufferaddress.html">SetBufferAddress</a> uses <a href="#screenbufferhi">screenBufferHi</a></span>
</div>
<hr class="light">
 This table contains the address within the screen buffer from which the
 interrupt handler should start pulling screen content to scroll onto the
 screen, depending on the direction of the scroll. The content that should be
 pulled onto the screen at the start of the scrolling process is as follows:

   * When panning right: The left column of the column-shaped screen buffer
     appears first as the new content scrolls in from the right

   * When panning left: The right column of the column-shaped screen buffer
     appears first as the new content scrolls in from the right

   * When panning up: The bottom row of the row-shaped screen buffer appears
     first as the new content scrolls in from above

   * When panning down: The top row of the row-shaped screen buffer appears
     first as the new content scrolls in from below

 This table contains the address of the new content for each panning direction,
 but with a slight complication. The first step in scrolling content onto the
 screen is to add the scrolling direction in scrollScreen(Hi Lo), so to make
 sure the first scroll moves the correct content onto the screen, the values
 in this table already have the corresponding value of scrollScreen(Hi Lo)
 subtracted from them, so when this is added at the start of the scroll, the
 address correctly points to the address of the new content in the screen
 buffer.

 The screen buffer starts at address screenBufferRow0, each character column
 takes up eight bytes of buffer space, and each character row takes up 320
 bytes of buffer space.

</div></div>
<span class="label">.screenBufferHi</span><a id="screenbufferhi" class="anchor"></a>

 <span class="mne">EQUB</span> <span class="operator">HI</span><span class="bracket">(</span><a class="popup variable">screenBufferRow0</a> <span class="operator">+</span> <span class="decimal">0</span> <span class="operator">*</span> <span class="decimal">8</span> <span class="operator">-</span> <span class="decimal">8</span><span class="bracket">)</span>      <span class="comment">\ Direction 0</span>
                                            <span class="comment">\</span>
                                            <span class="comment">\ Pan right, scroll left</span>
                                            <span class="comment">\</span>
                                            <span class="comment">\ screenBufferRow0 = base address of</span>
                                            <span class="comment">\                    screen buffer</span>
                                            <span class="comment">\</span>
                                            <span class="comment">\ 0 * 8 = the left column (column 0)</span>
                                            <span class="comment">\         of the 16-column screen</span>
                                            <span class="comment">\         buffer</span>
                                            <span class="comment">\</span>
                                            <span class="comment">\ -8 = - scrollScreen(Hi Lo)</span>
                                            <span class="comment">\    = - +8</span>

 <span class="mne">EQUB</span> <span class="operator">HI</span><span class="bracket">(</span><a class="popup variable">screenBufferRow0</a> <span class="operator">+</span> <span class="decimal">15</span> <span class="operator">*</span> <span class="decimal">8</span> <span class="operator">+</span> <span class="decimal">8</span><span class="bracket">)</span>     <span class="comment">\ Direction 1</span>
                                            <span class="comment">\</span>
                                            <span class="comment">\ Pan left, scroll right</span>
                                            <span class="comment">\</span>
                                            <span class="comment">\ screenBufferRow0 = base address of</span>
                                            <span class="comment">\                    screen buffer</span>
                                            <span class="comment">\</span>
                                            <span class="comment">\ 15 * 8 = the right column (column</span>
                                            <span class="comment">\          15) of the 16-column</span>
                                            <span class="comment">\          screen buffer</span>
                                            <span class="comment">\</span>
                                            <span class="comment">\ 8 = - scrollScreen(Hi Lo)</span>
                                            <span class="comment">\   = - -8</span>

 <span class="mne">EQUB</span> <span class="operator">HI</span><span class="bracket">(</span><a class="popup variable">screenBufferRow0</a> <span class="operator">+</span> <span class="decimal">7</span> <span class="operator">*</span> <span class="decimal">320</span> <span class="operator">+</span> <span class="decimal">320</span><span class="bracket">)</span>  <span class="comment">\ Direction 2</span>
                                            <span class="comment">\</span>
                                            <span class="comment">\ Pan up, scroll down</span>
                                            <span class="comment">\</span>
                                            <span class="comment">\ screenBufferRow0 = base address of</span>
                                            <span class="comment">\                    screen buffer</span>
                                            <span class="comment">\</span>
                                            <span class="comment">\ 8 * 320 = the bottom row (row 7)</span>
                                            <span class="comment">\           of the 8-row screen</span>
                                            <span class="comment">\           buffer</span>
                                            <span class="comment">\</span>
                                            <span class="comment">\ 320 = - scrollScreen(Hi Lo)</span>
                                            <span class="comment">\     = - -320</span>

 <span class="mne">EQUB</span> <span class="operator">HI</span><span class="bracket">(</span><a class="popup variable">screenBufferRow0</a> <span class="operator">+</span> <span class="decimal">0</span> <span class="operator">*</span> <span class="decimal">320</span> <span class="operator">-</span> <span class="decimal">320</span><span class="bracket">)</span>  <span class="comment">\ Direction 3</span>
                                            <span class="comment">\</span>
                                            <span class="comment">\ Pan down, scroll up</span>
                                            <span class="comment">\</span>
                                            <span class="comment">\ screenBufferRow0 = base address of</span>
                                            <span class="comment">\                    screen buffer</span>
                                            <span class="comment">\</span>
                                            <span class="comment">\ 8 * 320 = the top row (row 0) of</span>
                                            <span class="comment">\           the 8-row screen buffer</span>
                                            <span class="comment">\</span>
                                            <span class="comment">\ -320 = - scrollScreen(Hi Lo)</span>
                                            <span class="comment">\      = - +320</span>
</pre>
				</div>

				<div class="codeBlockWrapper popupWrapper" id="popup-screenbufferrow0"><div class="codeBlock"><div class="close">[X]</div><div class="content"><div class="link">Subroutine <a href="/source/main/subroutine/screenbufferrow0.html">screenBufferRow0</a> (category: Screen buffer)</div><div class="summary">The screen buffer for character row 0</div></div></div></div>

				<div class="codeBlockWrapper nav">
					<nav class="codeBlock previousNext"><a class="previous" rel="prev" title="Previous routine" href="/source/main/variable/scrollscreenhi.html">scrollScreenHi</a><a class="next" rel="next" title="Next routine" href="/source/main/variable/screenbufferlo.html">screenBufferLo</a></nav>
				</div>
			</article>

<?php
include_once("../../../templates_local/navigation.php");
?>
		</div>
	</body>
</html>
