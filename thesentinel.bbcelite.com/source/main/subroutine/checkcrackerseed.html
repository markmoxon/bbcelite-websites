<?php
include_once("../../../templates/template_functions.php");
page_header("cracker_protection", "subroutine_checkcrackerseed.html", "The CheckCrackerSeed subroutine", "Cracker protection: CheckCrackerSeed", "Annotated code for the CheckCrackerSeed subroutine in The Sentinel", "the_sentinel-code", "source_cracker_protection", "subroutine_checkcrackerseed", "");
?>
				<div class="codeBlockWrapper nav">
					<nav class="codeBlock previousNext"><a class="previous" rel="prev" title="Previous routine" href="/source/main/subroutine/spawncharacter3d_part_1_of_2.html">SpawnCharacter3D (Part 1 of 2)</a><a class="next" rel="next" title="Next routine" href="/source/main/subroutine/spawncharacter3d_part_2_of_2.html">SpawnCharacter3D (Part 2 of 2)</a></nav>
				</div>

				<div class="codeBlockWrapper">
<pre class="codeBlock sourceCode initial"><div class="headerBlockWrapper"><div class="headerBlock"><span class="headerLabel">       Name:</span> <span class="headerEntry">CheckCrackerSeed</span>                                        <span class="routineLink">[<a class="extraDataLink" href="#">Show more</a>]</span>
<span class="headerLabel">       Type:</span> <span class="headerEntry">Subroutine</span>
<span class="headerLabel">   Category:</span> <span class="headerEntry">Cracker protection</span>
<span class="headerLabel">    Summary:</span> <span class="headerEntry">Check whether the anti-cracker seed-related data is correctly set</span>
             <span class="headerEntry">up, as part of the anti-cracker code</span>
<div class="extraData"><span class="headerLabel">    Context:</span> <span class="headerEntry">See this subroutine <a href="/source/all/the_sentinel_f.html#header-checkcrackerseed">in context in the source code</a></span>
<span class="headerLabel"> References:</span> <span class="headerEntry">No direct references to this subroutine in this source file</span>
</div>
</div></div>
<span class="label">.CheckCrackerSeed</span><a id="checkcrackerseed" class="anchor"></a>

 <span class="mne">LDA</span> <a class="popup variable">alteredSeed</a><span class="operator">-</span><span class="decimal">7</span>,<span class="register">X</span>    <span class="comment">\ Set A to the value of alteredSeed, which we set in</span>
                        <span class="comment">\ the AlterCrackerSeed routine</span>

 <span class="mne">CMP</span> <a class="popup variable">CrackerSeed</a><span class="operator">+</span><span class="decimal">1</span><span class="operator">-</span><span class="decimal">7</span>,<span class="register">X</span>  <span class="comment">\ If A >= the contents of CrackerSeed+1 then the code</span>
 <span class="mne">BCS</span> <a class="popup destination">csee1</a>              <span class="comment">\ in AlterCrackerSeed was correctly run (which only</span>
                        <span class="comment">\ happens if the gameplay routines are run, i.e. when</span>
                        <span class="comment">\ the landscape has been played), so jump to csee1 to</span>
                        <span class="comment">\ skip the following</span>

                        <span class="comment">\ If we get here then the AlterCrackerSeed routine has</span>
                        <span class="comment">\ not been correctly run, which means the landscape was</span>
                        <span class="comment">\ not played properly, so we now corrupt the secret code</span>
                        <span class="comment">\ that's being drawn on-screen (if that's why we are</span>
                        <span class="comment">\ here)</span>

 <span class="mne">JSR</span> <a class="popup destination">CorruptSecretCode</a>  <span class="comment">\ At this point A &lt; the contents of CrackerSeed+1 and</span>
                        <span class="comment">\ the C flag is clear, so CorruptSecretCode will call</span>
                        <span class="comment">\ the GetNextSeedNumber routine, which will in turn</span>
                        <span class="comment">\ corrupt the generation of the landscape's secret code</span>
                        <span class="comment">\ by moving one step too far in the landscape's sequence</span>
                        <span class="comment">\ of seed numbers</span>

<span class="label">.csee1</span><a id="csee1" class="anchor"></a>
                        <span class="comment">\ Fall through into part 2 of SpawnCharacter3D to</span>
                        <span class="comment">\ continue with the character-spawning process</span>
</pre>
				</div>

				<div class="codeBlockWrapper popupWrapper" id="popup-corruptsecretcode"><div class="codeBlock"><div class="close">[X]</div><div class="content"><div class="link">Subroutine <a href="/source/main/subroutine/corruptsecretcode.html">CorruptSecretCode</a> (category: Cracker protection)</div><div class="summary">Corrupt the generation process for the landscape's secret code by fetching one more seed number than necessary</div></div></div></div>

				<div class="codeBlockWrapper popupWrapper" id="popup-crackerseed"><div class="codeBlock"><div class="close">[X]</div><div class="content"><div class="link">Subroutine <a href="/source/main/subroutine/crackerseed.html">CrackerSeed</a> (category: Cracker protection)</div><div class="summary">Obfuscated storage for the high byte of the landscape number as part of the anti-cracker code</div></div></div></div>

				<div class="codeBlockWrapper popupWrapper" id="popup-alteredseed"><div class="codeBlock"><div class="close">[X]</div><div class="content"><div class="name">Variable <a href="/source/main/workspace/main_variable_workspace.html#alteredseed">alteredSeed</a> in workspace <a href="/source/main/workspace/main_variable_workspace.html">Main variable workspace</a></div><div class="summary">An altered version of the anti-cracker seed-related data that gets created in AlterCrackerSeed and checked in CheckCreckerSeed as part of the anti-cracker code</div></div></div></div>

				<div class="codeBlockWrapper popupWrapper" id="popup-csee1"><div class="codeBlock"><div class="close">[X]</div><div class="content"><div class="name">Label <a href="/source/main/subroutine/checkcrackerseed.html#csee1">csee1</a> is local to this routine</div></div></div></div>

				<div class="codeBlockWrapper nav">
					<nav class="codeBlock previousNext"><a class="previous" rel="prev" title="Previous routine" href="/source/main/subroutine/spawncharacter3d_part_1_of_2.html">SpawnCharacter3D (Part 1 of 2)</a><a class="next" rel="next" title="Next routine" href="/source/main/subroutine/spawncharacter3d_part_2_of_2.html">SpawnCharacter3D (Part 2 of 2)</a></nav>
				</div>
			</article>

<?php
include_once("../../../templates_local/navigation.php");
?>
		</div>
	</body>
</html>
