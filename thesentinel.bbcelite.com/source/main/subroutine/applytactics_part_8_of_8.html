<?php
include_once("../../../templates/template_functions.php");
page_header("gameplay", "subroutine_applytactics_part_8_of_8.html", "The ApplyTactics (Part 8 of 8) subroutine", "Gameplay: ApplyTactics (Part 8 of 8)", "Annotated code for the ApplyTactics (Part 8 of 8) subroutine in The Sentinel", "the_sentinel-code", "source_gameplay", "subroutine_applytactics_part_8_of_8", "");
?>
				<div class="codeBlockWrapper nav">
					<nav class="codeBlock previousNext"><a class="previous" rel="prev" title="Previous routine" href="/source/main/subroutine/applytactics_part_7_of_8.html">ApplyTactics (Part 7 of 8)</a><a class="next" rel="next" title="Next routine" href="/source/main/subroutine/checkenemygaze_part_1_of_2.html">CheckEnemyGaze (Part 1 of 2)</a></nav>
				</div>

				<div class="codeBlockWrapper">
<pre class="codeBlock sourceCode initial"><div class="headerBlockWrapper"><div class="headerBlock"><span class="headerLabel">       Name:</span> <span class="headerEntry">ApplyTactics (Part 8 of 8)</span>                              <span class="routineLink">[<a class="extraDataLink" href="#">Show more</a>]</span>
<span class="headerLabel">       Type:</span> <span class="headerEntry">Subroutine</span>
<span class="headerLabel">   Category:</span> <span class="headerEntry">Gameplay</span>
<span class="headerLabel">    Summary:</span> <span class="headerEntry">Redraw the object on the screen, optionally with a dithered</span>
             <span class="headerEntry">effect</span>
<div class="extraData"><span class="headerLabel">    Context:</span> <span class="headerEntry">See this subroutine <a href="/source/all/the_sentinel_b.html#header-applytactics-part-8-of-8">in context in the source code</a></span>
<span class="headerLabel"> References:</span> <span class="headerEntry">This subroutine is called as follows:</span>
             <span class="headerEntry">* <a href="/source/main/subroutine/applyenemytactics.html">ApplyEnemyTactics</a> calls via <a href="#tact25">tact25</a></span></span>
             <span class="headerEntry">* <a href="/source/main/subroutine/applytactics_part_2_of_8.html">ApplyTactics (Part 2 of 8)</a> calls via <a href="#tact25">tact25</a></span></span>
             <span class="headerEntry">* <a href="/source/main/subroutine/applytactics_part_3_of_8.html">ApplyTactics (Part 3 of 8)</a> calls via <a href="#tact25">tact25</a></span></span>
             <span class="headerEntry">* <a href="/source/main/subroutine/applytactics_part_5_of_8.html">ApplyTactics (Part 5 of 8)</a> calls via <a href="#tact25">tact25</a></span></span>
             <span class="headerEntry">* <a href="/source/main/subroutine/applytactics_part_7_of_8.html">ApplyTactics (Part 7 of 8)</a> calls via <a href="#tact25">tact25</a></span></span>
</div>
<hr class="light">
<span class="subheader"> Other entry points:</span>

   <span class="argumentLabel">tact25</span>               <span class="argumentEntry">Dither the updated object #X onto the screen, with bit 7</span>
                        <span class="argumentEntry">of drawLandscape determining whether the object is drawn</span>
                        <span class="argumentEntry">on its own (bit 7 set) or with the surrounding landscape</span>
                        <span class="argumentEntry">(bit 7 clear)</span>

</div></div>
<span class="label">.tact25</span><a id="tact25" class="anchor"></a>

                        <span class="comment">\ We jump here to update object #X on-screen by drawing</span>
                        <span class="comment">\ the object (or the landscape without the object) onto</span>
                        <span class="comment">\ the screen with a dithered effect</span>
                        <span class="comment">\</span>
                        <span class="comment">\ This is used to show objects being absorbed, for</span>
                        <span class="comment">\ example</span>

 <span class="mne">LDA</span> <span class="hash">#</span><span class="binary">%01000000</span>         <span class="comment">\ Clear bit 7 and set bit 6 of ditherObjectSights so the</span>
 <span class="mne">STA</span> <a class="popup variable">ditherObjectSights</a> <span class="comment">\ updated object is dithered onto the screen in the call</span>
                        <span class="comment">\ to DrawUpdatedObject below</span>

<span class="label">.tact26</span><a id="tact26" class="anchor"></a>

                        <span class="comment">\ If we jump here instead of tact25, then we update</span>
                        <span class="comment">\ object #X on-screen, but instantly rather than with a</span>
                        <span class="comment">\ dithered effect</span>
                        <span class="comment">\</span>
                        <span class="comment">\ This is used to show objects rotating, for example</span>

 <span class="mne">STX</span> <a class="popup variable">currentObject</a>      <span class="comment">\ Set the current object to X so the call</span>

 <span class="mne">LDA</span> <a class="popup variable">playerObject</a>       <span class="comment">\ Set viewingObject to the object number of the player</span>
 <span class="mne">STA</span> <a class="popup variable">viewingObject</a>

 <span class="mne">JSR</span> <a class="popup destination">DrawUpdatedObject</a>  <span class="comment">\ Draw the updated object (or the landscape where the</span>
                        <span class="comment">\ object used to be) into the screen buffer and dither</span>
                        <span class="comment">\ it onto the screen, pixel by pixel and randomly</span>

<span class="label">.tact27</span><a id="tact27" class="anchor"></a>

 <span class="mne">JMP</span> <a class="popup destination">MoveOnToNextEnemy</a>  <span class="comment">\ Jump to MoveOnToNextEnemy to stop applying tactics to</span>
                        <span class="comment">\ this enemy and set things up so we move on to the next</span>
                        <span class="comment">\ enemy in the next iteration of the gameplay loop</span>
</pre>
				</div>

				<div class="codeBlockWrapper popupWrapper" id="popup-drawupdatedobject"><div class="codeBlock"><div class="close">[X]</div><div class="content"><div class="link">Subroutine <a href="/source/main/subroutine/drawupdatedobject.html">DrawUpdatedObject</a> (category: Drawing objects)</div><div class="summary">Draw an updated object on-screen, optionally with a dithered effect, and with or without the surrounding landscape</div></div></div></div>

				<div class="codeBlockWrapper popupWrapper" id="popup-moveontonextenemy"><div class="codeBlock"><div class="close">[X]</div><div class="content"><div class="link">Subroutine <a href="/source/main/subroutine/moveontonextenemy.html">MoveOnToNextEnemy</a> (category: Gameplay)</div><div class="summary">Update enemyObject so the next time we consider applying enemy tactics, we apply them to the next enemy, looping from 7 to 0</div></div></div></div>

				<div class="codeBlockWrapper popupWrapper" id="popup-currentobject"><div class="codeBlock"><div class="close">[X]</div><div class="content"><div class="name">Variable <a href="/source/main/workspace/zero_page.html#currentobject">currentObject</a> in workspace <a href="/source/main/workspace/zero_page.html">Zero page</a></div><div class="summary">The number of the object we are currently processing</div></div></div></div>

				<div class="codeBlockWrapper popupWrapper" id="popup-ditherobjectsights"><div class="codeBlock"><div class="close">[X]</div><div class="content"><div class="name">Variable <a href="/source/main/workspace/main_variable_workspace.html#ditherobjectsights">ditherObjectSights</a> in workspace <a href="/source/main/workspace/main_variable_workspace.html">Main variable workspace</a></div><div class="summary">Configures how an updated object is drawn onto the screen in the DrawUpdatedObject routine</div></div></div></div>

				<div class="codeBlockWrapper popupWrapper" id="popup-playerobject"><div class="codeBlock"><div class="close">[X]</div><div class="content"><div class="name">Variable <a href="/source/main/workspace/zero_page.html#playerobject">playerObject</a> in workspace <a href="/source/main/workspace/zero_page.html">Zero page</a></div><div class="summary">The number of the player object</div></div></div></div>

				<div class="codeBlockWrapper popupWrapper" id="popup-viewingobject"><div class="codeBlock"><div class="close">[X]</div><div class="content"><div class="name">Variable <a href="/source/main/workspace/zero_page.html#viewingobject">viewingObject</a> in workspace <a href="/source/main/workspace/zero_page.html">Zero page</a></div><div class="summary">The number of the viewing object</div></div></div></div>

				<div class="codeBlockWrapper nav">
					<nav class="codeBlock previousNext"><a class="previous" rel="prev" title="Previous routine" href="/source/main/subroutine/applytactics_part_7_of_8.html">ApplyTactics (Part 7 of 8)</a><a class="next" rel="next" title="Next routine" href="/source/main/subroutine/checkenemygaze_part_1_of_2.html">CheckEnemyGaze (Part 1 of 2)</a></nav>
				</div>
			</article>

<?php
include_once("../../../templates_local/navigation.php");
?>
		</div>
	</body>
</html>
