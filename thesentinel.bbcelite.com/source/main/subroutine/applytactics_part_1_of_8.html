<?php
include_once("../../../templates/template_functions.php");
page_header("gameplay", "subroutine_applytactics_part_1_of_8.html", "The ApplyTactics (Part 1 of 8) subroutine", "Gameplay: ApplyTactics (Part 1 of 8)", "Annotated code for the ApplyTactics (Part 1 of 8) subroutine in The Sentinel", "the_sentinel-code", "source_gameplay", "subroutine_applytactics_part_1_of_8", "");
?>
				<div class="codeBlockWrapper nav">
					<nav class="codeBlock previousNext"><a class="previous" rel="prev" title="Previous routine" href="/source/main/subroutine/moveontonextenemy.html">MoveOnToNextEnemy</a><a class="next" rel="next" title="Next routine" href="/source/main/subroutine/applytactics_part_2_of_8.html">ApplyTactics (Part 2 of 8)</a></nav>
				</div>

				<div class="codeBlockWrapper">
<pre class="codeBlock sourceCode initial"><div class="headerBlockWrapper"><div class="headerBlock"><span class="headerLabel">       Name:</span> <span class="headerEntry">ApplyTactics (Part 1 of 8)</span>                              <span class="routineLink">[<a class="extraDataLink" href="#">Show more</a>]</span>
<span class="headerLabel">       Type:</span> <span class="headerEntry">Subroutine</span>
<span class="headerLabel">   Category:</span> <span class="headerEntry">Gameplay</span>
<span class="headerLabel">    Summary:</span> <span class="headerEntry">Apply tactics to the Sentinel or a sentry</span>
<div class="extraData"><span class="headerLabel">    Context:</span> <span class="headerEntry">See this subroutine <a href="/source/all/the_sentinel_b.html#header-applytactics-part-1-of-8">in context in the source code</a></span>
<span class="headerLabel"> References:</span> <span class="headerEntry">This subroutine is called as follows:</span>
             <span class="headerEntry">* <a href="/source/main/subroutine/applyenemytactics.html">ApplyEnemyTactics</a> calls <a href="#applytactics">ApplyTactics</a></span>
</div>
<hr class="light">
<span class="subheader"> Arguments:</span>

   <span class="argumentLabel">X</span>                    <span class="argumentEntry">The object number of the Sentinel or sentry to which we</span>
                        <span class="argumentEntry">apply tactics (0 to 7)</span>

   <span class="argumentLabel">enemyObject</span>          <span class="argumentEntry">Contains the same as X</span>

</div></div>
<span class="label">.ApplyTactics</span><a id="applytactics" class="anchor"></a>

 <span class="mne">LDA</span> <a class="popup variable">enemyTacticTimer</a>,<span class="register">X</span> <span class="comment">\ If enemyTacticTimer >= 2 for this enemy, then jump to</span>
 <span class="mne">CMP</span> <span class="hash">#</span><span class="decimal">2</span>                 <span class="comment">\ MoveOnToNextEnemy to jump to MoveOnToNextEnemy to</span>
 <span class="mne">BCS</span> <a class="popup destination">MoveOnToNextEnemy</a>  <span class="comment">\ stop applying tactics to this enemy and set things up</span>
                        <span class="comment">\ so we move on to the next enemy in the next iteration</span>
                        <span class="comment">\ of the gameplay loop</span>

                        <span class="comment">\ If we get here then enemyTacticTimer for this enemy</span>
                        <span class="comment">\ has counted down to be less than 2, so it's time to</span>
                        <span class="comment">\ apply tactics to the enemy</span>

 <span class="mne">LDA</span> <span class="hash">#</span><span class="decimal">4</span>                 <span class="comment">\ Set enemyTacticTimer for the enemy to 4 so by default</span>
 <span class="mne">STA</span> <a class="popup variable">enemyTacticTimer</a>,<span class="register">X</span> <span class="comment">\ we wait for 4 * 0.06 = 0.6 seconds before applying</span>
                        <span class="comment">\ tactics to the enemy again (though we may change this)</span>

 <span class="mne">LDA</span> <span class="hash">#</span><span class="decimal">20</span>                <span class="comment">\ Set enemyViewingArc = 20, so the enemy's gaze has a</span>
 <span class="mne">STA</span> <a class="popup variable">enemyViewingArc</a>    <span class="comment">\ viewing arc that's the same width as the screen (as</span>
                        <span class="comment">\ the screen is 20 yaw angles across)</span>

 <span class="mne">LDA</span> <a class="popup variable">enemyMeanieTree</a>,<span class="register">X</span>  <span class="comment">\ Fetch the value of enemyMeanieTree for the enemy we</span>
                        <span class="comment">\ are processing, so A contains tells us whether the</span>
                        <span class="comment">\ enemy has turned a tree into a meanie</span>

 <span class="mne">BPL</span> <a class="popup destination">tact1</a>              <span class="comment">\ If bit 7 of enemyMeanieTree is clear then the enemy</span>
                        <span class="comment">\ has turned a tree into a meanie, so jump to part 2 to</span>
                        <span class="comment">\ apply tactics to the meanie</span>

 <span class="mne">JMP</span> <a class="popup destination">tact6</a>              <span class="comment">\ Bit 7 of enemyMeanieTree is set so the enemy has not</span>
                        <span class="comment">\ turned a tree into a meanie, so jump to part 3 to skip</span>
                        <span class="comment">\ the meanie tactics routine</span>
</pre>
				</div>

				<div class="codeBlockWrapper popupWrapper" id="popup-moveontonextenemy"><div class="codeBlock"><div class="close">[X]</div><div class="content"><div class="link">Subroutine <a href="/source/main/subroutine/moveontonextenemy.html">MoveOnToNextEnemy</a> (category: Gameplay)</div><div class="summary">Update enemyObject so the next time we consider applying enemy tactics, we apply them to the next enemy, looping from 7 to 0</div></div></div></div>

				<div class="codeBlockWrapper popupWrapper" id="popup-enemymeanietree"><div class="codeBlock"><div class="close">[X]</div><div class="content"><div class="name">Variable <a href="/source/main/workspace/main_variable_workspace.html#enemymeanietree">enemyMeanieTree</a> in workspace <a href="/source/main/workspace/main_variable_workspace.html">Main variable workspace</a></div><div class="summary">Enemy has turned a tree into a meanie (one byte per</div></div></div></div>

				<div class="codeBlockWrapper popupWrapper" id="popup-enemytactictimer"><div class="codeBlock"><div class="close">[X]</div><div class="content"><div class="name">Variable <a href="/source/main/workspace/main_variable_workspace.html#enemytactictimer">enemyTacticTimer</a> in workspace <a href="/source/main/workspace/main_variable_workspace.html">Main variable workspace</a></div><div class="summary">A timer for each enemy that counts down every 0.06</div></div></div></div>

				<div class="codeBlockWrapper popupWrapper" id="popup-enemyviewingarc"><div class="codeBlock"><div class="close">[X]</div><div class="content"><div class="name">Variable <a href="/source/main/workspace/main_variable_workspace.html#enemyviewingarc">enemyViewingArc</a> in workspace <a href="/source/main/workspace/main_variable_workspace.html">Main variable workspace</a></div><div class="summary">The viewing arc of the enemy that is being processed in the ApplyTactics routine</div></div></div></div>

				<div class="codeBlockWrapper popupWrapper" id="popup-tact1"><div class="codeBlock"><div class="close">[X]</div><div class="content"><div class="name">Label <a href="/source/main/subroutine/applytactics_part_2_of_8.html#tact1">tact1</a> in subroutine <a href="/source/main/subroutine/applytactics_part_2_of_8.html">ApplyTactics (Part 2 of 8)</a></div></div></div></div>

				<div class="codeBlockWrapper popupWrapper" id="popup-tact6"><div class="codeBlock"><div class="close">[X]</div><div class="content"><div class="name">Label <a href="/source/main/subroutine/applytactics_part_3_of_8.html#tact6">tact6</a> in subroutine <a href="/source/main/subroutine/applytactics_part_3_of_8.html">ApplyTactics (Part 3 of 8)</a></div></div></div></div>

				<div class="codeBlockWrapper nav">
					<nav class="codeBlock previousNext"><a class="previous" rel="prev" title="Previous routine" href="/source/main/subroutine/moveontonextenemy.html">MoveOnToNextEnemy</a><a class="next" rel="next" title="Next routine" href="/source/main/subroutine/applytactics_part_2_of_8.html">ApplyTactics (Part 2 of 8)</a></nav>
				</div>
			</article>

<?php
include_once("../../../templates_local/navigation.php");
?>
		</div>
	</body>
</html>
