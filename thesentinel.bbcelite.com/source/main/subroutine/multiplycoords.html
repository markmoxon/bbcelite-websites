<?php
include_once("../../../templates/template_functions.php");
page_header("maths_arithmetic", "subroutine_multiplycoords.html", "The MultiplyCoords subroutine", "Maths (Arithmetic): MultiplyCoords", "Annotated code for the MultiplyCoords subroutine in The Sentinel", "the_sentinel-code", "source_maths_arithmetic", "subroutine_multiplycoords", "");
?>
				<div class="codeBlockWrapper nav">
					<nav class="codeBlock previousNext"><a class="previous" rel="prev" title="Previous routine" href="/source/main/subroutine/getvectorforangles.html">GetVectorForAngles</a><a class="next" rel="next" title="Next routine" href="/source/main/subroutine/divideby16.html">DivideBy16</a></nav>
				</div>

				<div class="codeBlockWrapper">
<pre class="codeBlock sourceCode initial"><div class="headerBlockWrapper"><div class="headerBlock"><span class="headerLabel">       Name:</span> <span class="headerEntry">MultiplyCoords</span>                                          <span class="routineLink">[<a class="extraDataLink" href="#">Show more</a>]</span>
<span class="headerLabel">       Type:</span> <span class="headerEntry">Subroutine</span>
<span class="headerLabel">   Category:</span> <span class="headerEntry">Maths (Arithmetic)</span>
<span class="headerLabel">    Summary:</span> <span class="headerEntry">Multiply a 16-bit signed number and a 16-bit sign-magnitude value</span>
<div class="extraData"><span class="headerLabel">    Context:</span> <span class="headerEntry">See this subroutine <a href="/source/all/the_sentinel_c.html#header-multiplycoords">in context in the source code</a></span>
<span class="headerLabel"> References:</span> <span class="headerEntry">This subroutine is called as follows:</span>
             <span class="headerEntry">* <a href="/source/main/subroutine/getvectorforangles.html">GetVectorForAngles</a> calls <a href="#multiplycoords">MultiplyCoords</a></span>
</div>
<hr class="light">
 This routine multiplies two 16-bit values and stores the result according to
 the arguments, as follows.

 When Y = 0, it calculates:

   cosVectorPitch(Hi Lo) * sinAngle(Hi Lo)

 i.e. cosVectorPitch * sinAngle

 When Y = 1, it calculates:

   cosVectorPitch(Hi Lo) * cosAngle(Hi Lo)

 i.e. cosVectorPitch * cosAngle

 When X = 0, store the result in xVector(Lo Bot).

 When X = 2, store the result in zVector(Lo Bot).

<hr class="light">
<span class="subheader"> Arguments:</span>

   <span class="argumentLabel">cosVectorPitchHi</span>     <span class="argumentEntry">The 16-bit signed number to multiply (high byte)</span>

   <span class="argumentLabel">cosVectorPitchLo</span>     <span class="argumentEntry">The 16-bit signed number to multiply (low byte)</span>

   <span class="argumentLabel">Y</span>                    <span class="argumentEntry">Offset of the 16-bit sign-magnitude value to multiply:</span>

                        <span class="argumentEntry">  * 0 = sinAngle</span>

                        <span class="argumentEntry">  * 1 = cosAngle</span>

   <span class="argumentLabel">X</span>                    <span class="argumentEntry">Offset of the variable to store the result in:</span>

                        <span class="argumentEntry">  * 0 = xVector(Lo Bot)</span>

                        <span class="argumentEntry">  * 2 = zVector(Lo Bot)</span>

</div></div>
<span class="label">.MultiplyCoords</span><a id="multiplycoords" class="anchor"></a>

 <span class="mne">LDA</span> <span class="hash">#</span><span class="decimal">0</span>                 <span class="comment">\ Set H to sign to apply to the result of Multiply16x16</span>
 <span class="mne">STA</span> <a class="popup variable">H</a>                  <span class="comment">\ (in bit 7), so setting H  0 ensures that that the</span>
                        <span class="comment">\ result is positive</span>

 <span class="mne">LDA</span> <a class="popup variable">cosVectorPitchLo</a>   <span class="comment">\ Set (QQ PP) = cosVectorPitch(Hi Lo)</span>
 <span class="mne">STA</span> <a class="popup variable">PP</a>                 <span class="comment">\</span>
 <span class="mne">LDA</span> <a class="popup variable">cosVectorPitchHi</a>   <span class="comment">\ where (QQ PP) is a 16-bit signed number</span>
 <span class="mne">STA</span> <a class="popup variable">QQ</a>

 <span class="mne">LDA</span> <a class="popup variable">sinAngleLo</a>,<span class="register">Y</span>       <span class="comment">\ Set (SS RR) to the 16-bit sign-magnitude number</span>
 <span class="mne">STA</span> <a class="popup variable">RR</a>                 <span class="comment">\ pointed to by Y</span>
 <span class="mne">LDA</span> <a class="popup variable">sinAngleHi</a>,<span class="register">Y</span>
 <span class="mne">STA</span> <a class="popup variable">SS</a>

 <span class="mne">JSR</span> <a class="popup destination">Multiply16x16</a>      <span class="comment">\ Set (A T) = (QQ PP) * (SS RR)</span>
                        <span class="comment">\</span>
                        <span class="comment">\ And apply the sign from bit 7 of H to ensure the</span>
                        <span class="comment">\ result is positive</span>

 <span class="mne">STA</span> <a class="popup variable">xVectorLo</a>,<span class="register">X</span>        <span class="comment">\ Store the result in:</span>
 <span class="mne">LDA</span> <a class="popup variable">T</a>                  <span class="comment">\</span>
 <span class="mne">STA</span> <a class="popup variable">xVectorBot</a>,<span class="register">X</span>       <span class="comment">\   * xVector(Lo Bot) when X = 0</span>
                        <span class="comment">\</span>
                        <span class="comment">\   * zVector(Lo Bot) when X = 2</span>

 <span class="mne">RTS</span>                    <span class="comment">\ Return from the subroutine</span>
</pre>
				</div>

				<div class="codeBlockWrapper popupWrapper" id="popup-h"><div class="codeBlock"><div class="close">[X]</div><div class="content"><div class="name">Variable <a href="/source/main/workspace/zero_page.html#h">H</a> in workspace <a href="/source/main/workspace/zero_page.html">Zero page</a></div><div class="summary">Temporary storage, used in the maths routines</div></div></div></div>

				<div class="codeBlockWrapper popupWrapper" id="popup-multiply16x16"><div class="codeBlock"><div class="close">[X]</div><div class="content"><div class="link">Subroutine <a href="/source/main/subroutine/multiply16x16.html">Multiply16x16</a> (category: Maths (Arithmetic))</div><div class="summary">Multiply a sign-magnitude 16-bit number and a signed 16-bit number</div></div></div></div>

				<div class="codeBlockWrapper popupWrapper" id="popup-pp"><div class="codeBlock"><div class="close">[X]</div><div class="content"><div class="name">Variable <a href="/source/main/workspace/zero_page.html#pp">PP</a> in workspace <a href="/source/main/workspace/zero_page.html">Zero page</a></div><div class="summary">Temporary storage, used in the maths routines</div></div></div></div>

				<div class="codeBlockWrapper popupWrapper" id="popup-qq"><div class="codeBlock"><div class="close">[X]</div><div class="content"><div class="name">Variable <a href="/source/main/workspace/zero_page.html#qq">QQ</a> in workspace <a href="/source/main/workspace/zero_page.html">Zero page</a></div><div class="summary">Temporary storage, used in the maths routines</div></div></div></div>

				<div class="codeBlockWrapper popupWrapper" id="popup-rr"><div class="codeBlock"><div class="close">[X]</div><div class="content"><div class="name">Variable <a href="/source/main/workspace/zero_page.html#rr">RR</a> in workspace <a href="/source/main/workspace/zero_page.html">Zero page</a></div><div class="summary">Temporary storage, used in the maths routines</div></div></div></div>

				<div class="codeBlockWrapper popupWrapper" id="popup-ss"><div class="codeBlock"><div class="close">[X]</div><div class="content"><div class="name">Variable <a href="/source/main/workspace/zero_page.html#ss">SS</a> in workspace <a href="/source/main/workspace/zero_page.html">Zero page</a></div><div class="summary">Temporary storage, used in the maths routines</div></div></div></div>

				<div class="codeBlockWrapper popupWrapper" id="popup-t"><div class="codeBlock"><div class="close">[X]</div><div class="content"><div class="name">Variable <a href="/source/main/workspace/zero_page.html#t">T</a> in workspace <a href="/source/main/workspace/zero_page.html">Zero page</a></div><div class="summary">Temporary storage, used in a number of places</div></div></div></div>

				<div class="codeBlockWrapper popupWrapper" id="popup-cosvectorpitchhi"><div class="codeBlock"><div class="close">[X]</div><div class="content"><div class="name">Variable <a href="/source/main/workspace/zero_page.html#cosvectorpitchhi">cosVectorPitchHi</a> in workspace <a href="/source/main/workspace/zero_page.html">Zero page</a></div><div class="summary">The high byte of cos(vectorPitchAngle) when converting pitch and yaw angles to cartesian vectors</div></div></div></div>

				<div class="codeBlockWrapper popupWrapper" id="popup-cosvectorpitchlo"><div class="codeBlock"><div class="close">[X]</div><div class="content"><div class="name">Variable <a href="/source/main/workspace/zero_page.html#cosvectorpitchlo">cosVectorPitchLo</a> in workspace <a href="/source/main/workspace/zero_page.html">Zero page</a></div><div class="summary">The low byte of cos(vectorPitchAngle) when converting pitch and yaw angles to cartesian vectors</div></div></div></div>

				<div class="codeBlockWrapper popupWrapper" id="popup-sinanglehi"><div class="codeBlock"><div class="close">[X]</div><div class="content"><div class="name">Variable <a href="/source/main/workspace/main_variable_workspace.html#sinanglehi">sinAngleHi</a> in workspace <a href="/source/main/workspace/main_variable_workspace.html">Main variable workspace</a></div><div class="summary">The high byte of the sine of a pitch or yaw angle, as calculated by the GetRotationMatrix routine</div></div></div></div>

				<div class="codeBlockWrapper popupWrapper" id="popup-sinanglelo"><div class="codeBlock"><div class="close">[X]</div><div class="content"><div class="name">Variable <a href="/source/main/workspace/main_variable_workspace.html#sinanglelo">sinAngleLo</a> in workspace <a href="/source/main/workspace/main_variable_workspace.html">Main variable workspace</a></div><div class="summary">The low byte of the sine of a pitch or yaw angle, as calculated by the GetRotationMatrix routine</div></div></div></div>

				<div class="codeBlockWrapper popupWrapper" id="popup-xvectorbot"><div class="codeBlock"><div class="close">[X]</div><div class="content"><div class="name">Variable <a href="/source/main/workspace/zero_page.html#xvectorbot">xVectorBot</a> in workspace <a href="/source/main/workspace/zero_page.html">Zero page</a></div><div class="summary">The x-coordinate of a vector (bottom byte)</div></div></div></div>

				<div class="codeBlockWrapper popupWrapper" id="popup-xvectorlo"><div class="codeBlock"><div class="close">[X]</div><div class="content"><div class="name">Variable <a href="/source/main/workspace/zero_page.html#xvectorlo">xVectorLo</a> in workspace <a href="/source/main/workspace/zero_page.html">Zero page</a></div><div class="summary">The x-coordinate of a vector (low byte)</div></div></div></div>

				<div class="codeBlockWrapper nav">
					<nav class="codeBlock previousNext"><a class="previous" rel="prev" title="Previous routine" href="/source/main/subroutine/getvectorforangles.html">GetVectorForAngles</a><a class="next" rel="next" title="Next routine" href="/source/main/subroutine/divideby16.html">DivideBy16</a></nav>
				</div>
			</article>

<?php
include_once("../../../templates_local/navigation.php");
?>
		</div>
	</body>
</html>
