<?php
include_once("../../../templates/template_functions.php");
page_header("maths_geometry", "subroutine_followgazevector_part_1_of_5.html", "The FollowGazeVector (Part 1 of 5) subroutine", "Maths (Geometry): FollowGazeVector (Part 1 of 5)", "Annotated code for the FollowGazeVector (Part 1 of 5) subroutine in The Sentinel", "the_sentinel-code", "source_maths_geometry", "subroutine_followgazevector_part_1_of_5", "");
?>
				<div class="codeBlockWrapper nav">
					<nav class="codeBlock previousNext"><a class="previous" rel="prev" title="Previous routine" href="/source/main/subroutine/addvectortocoord.html">AddVectorToCoord</a><a class="next" rel="next" title="Next routine" href="/source/main/subroutine/followgazevector_part_2_of_5.html">FollowGazeVector (Part 2 of 5)</a></nav>
				</div>

				<div class="codeBlockWrapper">
<pre class="codeBlock sourceCode initial"><div class="headerBlockWrapper"><div class="headerBlock"><span class="headerLabel">       Name:</span> <span class="headerEntry">FollowGazeVector (Part 1 of 5)</span>                          <span class="routineLink">[<a class="extraDataLink" href="#">Show more</a>]</span>
<span class="headerLabel">       Type:</span> <span class="headerEntry">Subroutine</span>
<span class="headerLabel">   Category:</span> <span class="headerEntry">Maths (Geometry)</span>
<span class="headerLabel">    Summary:</span> <span class="headerEntry">Follow a gaze vector from a viewing object to determine whether</span>
             <span class="headerEntry">the viewer can see a flat tile or platform (i.e. boulder or tower)</span>
<div class="extraData"><span class="headerLabel">    Context:</span> <span class="headerEntry">See this subroutine <a href="/source/all/the_sentinel_c.html#header-followgazevector-part-1-of-5">in context in the source code</a></span>
<span class="headerLabel"> References:</span> <span class="headerEntry">This subroutine is called as follows:</span>
             <span class="headerEntry">* <a href="/source/main/subroutine/checkenemygaze_part_2_of_2.html">CheckEnemyGaze (Part 2 of 2)</a> calls <a href="#followgazevector">FollowGazeVector</a></span>
             <span class="headerEntry">* <a href="/source/main/subroutine/processactionkeys_part_1_of_2.html">ProcessActionKeys (Part 1 of 2)</a> calls <a href="#followgazevector">FollowGazeVector</a></span>
</div>
<hr class="light">
 This routine follows the gaze of a viewing object to see if it hits a tile or
 a platform (where a platform is a boulder or the Sentinel's tower)

 The gaze is defined by the following vector:

   [ xVector ]   [ xVector(Lo Bot) ]
   [ yVector ] = [ yVector(Lo Bot) ]
   [ zVector ]   [ zVector(Lo Bot) ]

 This contains the gaze vector, scaled down to be very small, so we can trace
 the line of the gaze by repeatedly adding this vector to the coordinates of
 the viewing object to step along the line of the gaze. At each step we check
 to see whether the gaze has hit a tile, repeating this until we either hit a
 tile or fall off the edge of the landscape.

<hr class="light">
<span class="subheader"> Arguments:</span>

   <span class="argumentLabel">viewingObject</span>        <span class="argumentEntry">The number of the object that is performing the gaze</span>

   <span class="argumentLabel">xVector(Lo Bot)</span>      <span class="argumentEntry">The x-coordinate of the scaled-down gaze vector</span>

   <span class="argumentLabel">yVector(Lo Bot)</span>      <span class="argumentEntry">The y-coordinate of the scaled-down gaze vector</span>

   <span class="argumentLabel">zVector(Lo Bot)</span>      <span class="argumentEntry">The z-coordinate of the scaled-down gaze vector</span>

   <span class="argumentLabel">enemyCheckingRobot</span>   <span class="argumentEntry">Set bit 7 if this routine is being called when an enemy</span>
                        <span class="argumentEntry">is checking to see if it can see a robot object (i.e. in</span>
                        <span class="argumentEntry">the CheckEnemyGaze routine)</span>

   <span class="argumentLabel">targetObject</span>         <span class="argumentEntry">The target object</span>

<hr class="light">
<span class="subheader"> Returns:</span>

   <span class="argumentLabel">C flag</span>               <span class="argumentEntry">Status flag:</span>

                        <span class="argumentEntry">  * Clear if the viewing object can see a tile along</span>
                        <span class="argumentEntry">    the gaze vector (or, if enemyCheckingRobot is set,</span>
                        <span class="argumentEntry">    if the viewing object can see a robot)</span>

                        <span class="argumentEntry">  * Set if the viewing object can't see a tile along</span>
                        <span class="argumentEntry">    the gaze vector</span>

   <span class="argumentLabel">targetOnTile</span>         <span class="argumentEntry">Records whether the gaze vector can see a tile</span>
                        <span class="argumentEntry">containing the target object:</span>

                        <span class="argumentEntry">  * Bit 7 clear = gaze vector cannot see the target</span>
                        <span class="argumentEntry">                  object</span>

                        <span class="argumentEntry">  * Bit 7 set = gaze vector can see the target object</span>

   <span class="argumentLabel">gazeCanSeeTree</span>       <span class="argumentEntry">Records whether the gaze vector can see a tree:</span>

                        <span class="argumentEntry">  * Bit 7 clear = gaze vector cannot see a tree</span>

                        <span class="argumentEntry">  * Bit 7 set = gaze vector can see a tree</span>

   <span class="argumentLabel">xCoordHi</span>             <span class="argumentEntry">The tile x-coordinate of the tile that can be seen</span>

   <span class="argumentLabel">zCoordHi</span>             <span class="argumentEntry">The tile z-coordinate of the tile that can be seen</span>

</div></div>
<span class="label">.FollowGazeVector</span><a id="followgazevector" class="anchor"></a>

 <span class="mne">LDX</span> <a class="popup variable">viewingObject</a>      <span class="comment">\ Set X to the number of the object that is performing</span>
                        <span class="comment">\ the gaze (i.e. doing the looking or scanning)</span>

 <span class="mne">LSR</span> <a class="popup variable">targetOnTile</a>       <span class="comment">\ Clear bit 7 of targetOnTile so it can be set if the</span>
                        <span class="comment">\ tile contains the target object whose number is in</span>
                        <span class="comment">\ targetObject</span>

 <span class="mne">LSR</span> <a class="popup variable">gazeCanSeeTree</a>     <span class="comment">\ Clear bit 7 of gazeCanSeeTree so it can be set if</span>
                        <span class="comment">\ there is tree on the tile that can be seen by the</span>
                        <span class="comment">\ gaze vector</span>

 <span class="mne">JSR</span> <a class="popup destination">GetObjectCoords</a>    <span class="comment">\ Fetch the cartesian coordinates of the viewing object</span>
                        <span class="comment">\ as three 24-bit numbers, as follows:</span>
                        <span class="comment">\</span>
                        <span class="comment">\   xCoord(Hi Lo Bot)</span>
                        <span class="comment">\</span>
                        <span class="comment">\   yCoord(Hi Lo Bot)</span>
                        <span class="comment">\</span>
                        <span class="comment">\   zCoord(Hi Lo Bot)</span>
                        <span class="comment">\</span>
                        <span class="comment">\ We now repeatedly add the scaled-down gaze vector to</span>
                        <span class="comment">\ this coordinate to step along the gaze from the</span>
                        <span class="comment">\ viewing object and see if it hits anything</span>

<span class="label">.gaze1</span><a id="gaze1" class="anchor"></a>

 <span class="mne">JSR</span> <a class="popup destination">AddVectorToCoord</a>   <span class="comment">\ Add the coordinates and the vector as follows:</span>
                        <span class="comment">\</span>
                        <span class="comment">\   [ xCoord ]   [ xCoord ]   [ xVector ]</span>
                        <span class="comment">\   [ yCoord ] = [ yCoord ] + [ yVector ]</span>
                        <span class="comment">\   [ zCoord ]   [ zCoord ]   [ zVector ]</span>
                        <span class="comment">\</span>
                        <span class="comment">\ where:</span>
                        <span class="comment">\</span>
                        <span class="comment">\   [ xCoord ]   [ xCoord(Hi Lo Bot) ]</span>
                        <span class="comment">\   [ yCoord ] = [ yCoord(Hi Lo Bot) ]</span>
                        <span class="comment">\   [ zCoord ]   [ zCoord(Hi Lo Bot) ]</span>
                        <span class="comment">\</span>
                        <span class="comment">\ and:</span>
                        <span class="comment">\</span>
                        <span class="comment">\   [ xVector ]   [ xVector(Lo Bot) ]</span>
                        <span class="comment">\   [ yVector ] = [ yVector(Lo Bot) ]</span>
                        <span class="comment">\   [ zVector ]   [ zVector(Lo Bot) ]</span>
                        <span class="comment">\</span>
                        <span class="comment">\ This adds the scaled-down gaze vector to the</span>
                        <span class="comment">\ coordinate to perform a step along the object's gaze</span>

 <span class="mne">LDA</span> <a class="popup variable">xCoordHi</a>           <span class="comment">\ Set xTile to the high byte of the result (i.e. the</span>
 <span class="mne">STA</span> <a class="popup variable">xTile</a>              <span class="comment">\ tile x-coordinate below our current position along the</span>
                        <span class="comment">\ viewer's gaze)</span>

 <span class="mne">CMP</span> <span class="hash">#</span><span class="decimal">31</span>                <span class="comment">\ If we just stepped beyond the right edge of the</span>
 <span class="mne">BCS</span> <a class="popup destination">gaze4</a>              <span class="comment">\ landscape then the gaze does not land upon a tile, so</span>
                        <span class="comment">\ jump to gaze4 to return from the subroutine with the</span>
                        <span class="comment">\ C flag set to indicate that the viewer is not looking</span>
                        <span class="comment">\ at a tile</span>

 <span class="mne">LDA</span> <a class="popup variable">zCoordHi</a>           <span class="comment">\ Set zTile to the high byte of the result (i.e. the</span>
 <span class="mne">STA</span> <a class="popup variable">zTile</a>              <span class="comment">\ tile z-coordinate below our current position along the</span>
                        <span class="comment">\ viewer's gaze)</span>

 <span class="mne">CMP</span> <span class="hash">#</span><span class="decimal">31</span>                <span class="comment">\ If we just stepped beyond the rear edge of the</span>
 <span class="mne">BCS</span> <a class="popup destination">gaze4</a>              <span class="comment">\ landscape then the gaze does not land upon a tile, so</span>
                        <span class="comment">\ jump to gaze4 to return from the subroutine with the</span>
                        <span class="comment">\ C flag set to indicate that the viewer is not looking</span>
                        <span class="comment">\ at a tile</span>

 <span class="mne">LDA</span> <span class="hash">#</span><span class="binary">%10000000</span>         <span class="comment">\ Set bit 7 and clear bit 6 of considerObjects so the</span>
 <span class="mne">STA</span> <a class="popup variable">considerObjects</a>    <span class="comment">\ following call to GetTileAltitude will include trees</span>
                        <span class="comment">\ and platform objects in its calculations</span>

 <span class="mne">STA</span> <a class="popup variable">yAccuracyLo</a>        <span class="comment">\ Set yAccuracyLo = 128, so by default the gaze vector</span>
                        <span class="comment">\ has to be no more than half a tile's height above a</span>
                        <span class="comment">\ tile for us to consider it as potentially seeing the</span>
                        <span class="comment">\ tile (this figure is changed for the Sentinel's tower</span>
                        <span class="comment">\ to make the player have to be much more accurate when</span>
                        <span class="comment">\ trying to view the Sentinel's tile)</span>

 <span class="mne">LDA</span> <span class="hash">#</span><span class="decimal">0</span>                 <span class="comment">\ Set yPlatformLo = 0, so if the tile doesn't contain</span>
 <span class="mne">STA</span> <a class="popup variable">yPlatformLo</a>        <span class="comment">\ a platform, yPlatformLo will be zero</span>

 <span class="mne">STA</span> <a class="popup variable">boulderOnTile</a>      <span class="comment">\ Clear bit 7 of boulderOnTile to denote that the tile</span>
                        <span class="comment">\ does not contain a boulder, so GetTileAltitude can</span>
                        <span class="comment">\ set bit 7 if it does contain a boulder</span>

 <span class="mne">JSR</span> <a class="popup destination">GetTileAltitude</a>    <span class="comment">\ Call GetTileAltitude with bit 7 of considerObjects</span>
                        <span class="comment">\ set to extract the following tile data:</span>
                        <span class="comment">\</span>
                        <span class="comment">\   * (A yPlatformLo) = if the tile contains a boulder</span>
                        <span class="comment">\     or the Sentinel's tower, then this is set to the</span>
                        <span class="comment">\     altitude of the platform object, plus 32 for the</span>
                        <span class="comment">\     tower or plus 96 for the boulder</span>
                        <span class="comment">\</span>
                        <span class="comment">\   * A = if the tile contains a non-platform object</span>
                        <span class="comment">\         then this is set to the high byte of the</span>
                        <span class="comment">\         tile's altitude, which is the same as the high</span>
                        <span class="comment">\         byte of the object's altitude</span>
                        <span class="comment">\</span>
                        <span class="comment">\   * A = if the tile is not flat then this is set to</span>
                        <span class="comment">\         the tile altitude from the tile data</span>
                        <span class="comment">\</span>
                        <span class="comment">\   * C flag = the tile's shape, clear if the tile is</span>
                        <span class="comment">\              flat or set if the tile is not flat</span>
                        <span class="comment">\</span>
                        <span class="comment">\   * boulderOnTile has bit 7 set if the tile contains a</span>
                        <span class="comment">\     boulder</span>
                        <span class="comment">\</span>
                        <span class="comment">\   * considerObjects has bit 6 if the tile contains a</span>
                        <span class="comment">\     boulder or the Sentinel's tower and the current</span>
                        <span class="comment">\     position along the gaze vector is not within the</span>
                        <span class="comment">\     platform object (so the gaze vector is passing</span>
                        <span class="comment">\     close by the platform object but is not hitting</span>
                        <span class="comment">\     it)</span>
                        <span class="comment">\</span>
                        <span class="comment">\   * yAccuracyLo is changed from 128 to 16 if the tile</span>
                        <span class="comment">\     contains the Sentinel's tower and the gaze vector</span>
                        <span class="comment">\     is pointing at the sides of the tower</span>

 <span class="mne">BCS</span> <a class="popup destination">gaze5</a>              <span class="comment">\ If the tile is not flat, jump to gaze5 to calculate</span>
                        <span class="comment">\ the gaze vector's interaction with the tile slopes</span>

                        <span class="comment">\ If we get here then the tile is flat and may contain</span>
                        <span class="comment">\ an object</span>

 <span class="mne">TAX</span>                    <span class="comment">\ Set (X A) to the altitude of the platform (if there is</span>
 <span class="mne">LDA</span> <a class="popup variable">yPlatformLo</a>        <span class="comment">\ one) or the altitude of the tile (is there isn't)</span>

 <span class="mne">SEC</span>                    <span class="comment">\ Set the following:</span>
 <span class="mne">SBC</span> <a class="popup variable">yCoordLo</a>           <span class="comment">\</span>
 <span class="mne">STA</span> <a class="popup variable">yPlatformLo</a>        <span class="comment">\   (A yPlatformLo) = (X A) - yCoord(Hi Lo)</span>
 <span class="mne">TXA</span>                    <span class="comment">\</span>
 <span class="mne">SBC</span> <a class="popup variable">yCoordHi</a>           <span class="comment">\ So this contains the relative altitude of the tile or</span>
                        <span class="comment">\ platform compared to our current position along the</span>
                        <span class="comment">\ viewer's gaze (as we are subtracting the altitude of</span>
                        <span class="comment">\ the gaze from the altitude of the tile/platform)</span>

 <span class="mne">BMI</span> <a class="popup destination">gaze1</a>              <span class="comment">\ If the high byte of the result is negative then the</span>
                        <span class="comment">\ gaze is passing through the y-coordinate above the</span>
                        <span class="comment">\ tile or platform, in terms of whole numbers (so it is</span>
                        <span class="comment">\ essentially more than one "tile cube" above the tile)</span>
                        <span class="comment">\</span>
                        <span class="comment">\ This means it hasn't hit the tile and is still passing</span>
                        <span class="comment">\ through empty space above the landscape, so loop back</span>
                        <span class="comment">\ to gaze1 to move along the gaze vector and restart the</span>
                        <span class="comment">\ checks</span>

 <span class="mne">BNE</span> <a class="popup destination">gaze4</a>              <span class="comment">\ If the high byte of the result is non-zero and</span>
                        <span class="comment">\ positive, then the gaze is passing through the</span>
                        <span class="comment">\ y-coordinate below the tile or platform, in terms of</span>
                        <span class="comment">\ whole numbers (so it is essentially in the "tile cube"</span>
                        <span class="comment">\ beneath the tile)</span>
                        <span class="comment">\</span>
                        <span class="comment">\ This means the gaze must have passed through a slope</span>
                        <span class="comment">\ and "into" the ground beneath the tile, so jump to</span>
                        <span class="comment">\ gaze4 to return from the subroutine with the C flag</span>
                        <span class="comment">\ set to indicate that the viewer is not looking at a</span>
                        <span class="comment">\ tile</span>

                        <span class="comment">\ If we get here then the gaze is currently sitting</span>
                        <span class="comment">\ within the "tile cube" above the tile</span>

 <span class="mne">LDA</span> <a class="popup variable">yPlatformLo</a>        <span class="comment">\ If yPlatformLo >= yAccuracyLo, then the vertical</span>
 <span class="mne">CMP</span> <a class="popup variable">yAccuracyLo</a>        <span class="comment">\ distance between the gaze and the platform is greater</span>
 <span class="mne">BCS</span> <a class="popup destination">gaze4</a>              <span class="comment">\ than the accuracy specified in yAccuracyLo, so jump to</span>
                        <span class="comment">\ gaze4 to return from the subroutine with the C flag</span>
                        <span class="comment">\ set to indicate that the viewer is not looking at a</span>
                        <span class="comment">\ tile or object</span>
                        <span class="comment">\</span>
                        <span class="comment">\ Note that yAccuracyLo = 128 for all tiles (i.e. no</span>
                        <span class="comment">\ more than 0.5 of a tile's height above the tile) apart</span>
                        <span class="comment">\ from the tile containing the Sentinel's tower, when it</span>
                        <span class="comment">\ is reduced to 16 if the gaze vector is pointing at the</span>
                        <span class="comment">\ sides of the tower (i.e. no more than 0.025 of a</span>
                        <span class="comment">\ tile's height above the tile)</span>
                        <span class="comment">\</span>
                        <span class="comment">\ This makes the player have to be much more accurate</span>
                        <span class="comment">\ when trying to view the Sentinel's tile</span>

 <span class="mne">BIT</span> <a class="popup variable">considerObjects</a>    <span class="comment">\ If bit 6 of considerObjects is set then the tile</span>
 <span class="mne">BVS</span> <a class="popup destination">gaze4</a>              <span class="comment">\ contains a boulder or the Sentinel's tower and the</span>
                        <span class="comment">\ current position along the gaze vector is not within</span>
                        <span class="comment">\ the platform object (so the gaze vector is passing</span>
                        <span class="comment">\ close by the platform object but is not hitting it),</span>
                        <span class="comment">\ so jump to gaze4 to return from the subroutine with</span>
                        <span class="comment">\ the C flag set to indicate that the viewer is not</span>
                        <span class="comment">\ looking at a tile, as the platform will be at least</span>
                        <span class="comment">\ partially obscuring any tiles that are visible to the</span>
                        <span class="comment">\ sides of the boulder or tower</span>

 <span class="mne">LDA</span> <a class="popup variable">enemyCheckingRobot</a> <span class="comment">\ If bit 7 is set in either of enemyCheckingRobot and</span>
 <span class="mne">ORA</span> <a class="popup variable">boulderOnTile</a>      <span class="comment">\ boulderOnTile, skip the following test, as we do not</span>
 <span class="mne">BMI</span> <a class="popup destination">gaze2</a>              <span class="comment">\ care if the gaze is upwards when either of the</span>
                        <span class="comment">\ following is true:</span>
                        <span class="comment">\</span>
                        <span class="comment">\   * This is an enemy is looking for a robot, in which</span>
                        <span class="comment">\     case we are still interested even if the enemy is</span>
                        <span class="comment">\     below the robot and can't see the tile that the</span>
                        <span class="comment">\     robot is on</span>
                        <span class="comment">\</span>
                        <span class="comment">\   * We are looking at a boulder, in which case it can</span>
                        <span class="comment">\     still be above us and a suitable target for an</span>
                        <span class="comment">\     action (as we can create or absorb from a boulder</span>
                        <span class="comment">\     stack by looking at any of the boulders on the</span>
                        <span class="comment">\     stack, even if they are above us)</span>

                        <span class="comment">\ If we get here then neither of the above special cases</span>
                        <span class="comment">\ are true, so we now check whether the viewer is</span>
                        <span class="comment">\ looking upwards, as that will mean they can't see down</span>
                        <span class="comment">\ onto the tile</span>

 <span class="mne">LDA</span> <a class="popup variable">yVectorLo</a>          <span class="comment">\ If the low byte (i.e. the fractional part) of the gaze</span>
 <span class="mne">BPL</span> <a class="popup destination">gaze4</a>              <span class="comment">\ vector's y-coordinate is positive, then the viewer is</span>
                        <span class="comment">\ looking upwards and therefore can't see down onto the</span>
                        <span class="comment">\ tile, so jump to gaze4 to return from the subroutine</span>
                        <span class="comment">\ with the C flag set to indicate that the viewer is not</span>
                        <span class="comment">\ looking at a tile</span>

<span class="label">.gaze2</span><a id="gaze2" class="anchor"></a>

                        <span class="comment">\ If we get here then the viewer's gaze has landed on a</span>
                        <span class="comment">\ tile, so the final check is to make sure the viewer is</span>
                        <span class="comment">\ not looking at their own tile</span>

 <span class="mne">LDX</span> <a class="popup variable">viewingObject</a>      <span class="comment">\ Set X to the number of the object that is performing</span>
                        <span class="comment">\ the gaze (i.e. doing the looking or scanning)</span>

 <span class="mne">LDA</span> <a class="popup variable">xTile</a>              <span class="comment">\ If the x-coordinate of the viewing object is not the</span>
 <span class="mne">CMP</span> <a class="popup variable">xObject</a>,<span class="register">X</span>          <span class="comment">\ same as the x-coordinate of the tile that the gaze has</span>
 <span class="mne">BNE</span> <a class="popup destination">gaze3</a>              <span class="comment">\ hit, jump to gaze3 to return from the subroutine with</span>
                        <span class="comment">\ the C flag clear, to indicate that the viewer is</span>
                        <span class="comment">\ looking at a tile</span>

                        <span class="comment">\ If we get here then the x-coordinates match, so we now</span>
                        <span class="comment">\ need to check the z-coordinates</span>

 <span class="mne">LDA</span> <a class="popup variable">zTile</a>              <span class="comment">\ If the z-coordinate of the viewing object is the same</span>
 <span class="mne">CMP</span> <a class="popup variable">zObject</a>,<span class="register">X</span>          <span class="comment">\ as the x-coordinate, then the viewer is looking at</span>
 <span class="mne">BEQ</span> <a class="popup destination">gaze1</a>              <span class="comment">\ their own tile, so loop back to gaze1 to move along</span>
                        <span class="comment">\ the gaze vector and restart the checks</span>

                        <span class="comment">\ If we get here then the z-coordinates do not match, so</span>
                        <span class="comment">\ we can now return from the subroutine with the C flag</span>
                        <span class="comment">\ clear, to indicate that the viewer is looking at a</span>
                        <span class="comment">\ tile</span>

<span class="label">.gaze3</span><a id="gaze3" class="anchor"></a>

 <span class="mne">CLC</span>                    <span class="comment">\ Set the C flag to indicate that the gaze hit</span>
                        <span class="comment">\ something, so the viewing object is looking at</span>
                        <span class="comment">\ something</span>

 <span class="mne">RTS</span>                    <span class="comment">\ Return from the subroutine</span>

<span class="label">.gaze4</span><a id="gaze4" class="anchor"></a>

 <span class="mne">SEC</span>                    <span class="comment">\ Set the C flag to indicate that the gaze didn't hit</span>
                        <span class="comment">\ anything, so the viewing object isn't looking at</span>
                        <span class="comment">\ anything</span>

 <span class="mne">RTS</span>                    <span class="comment">\ Return from the subroutine</span>
</pre>
				</div>

				<div class="codeBlockWrapper popupWrapper" id="popup-addvectortocoord"><div class="codeBlock"><div class="close">[X]</div><div class="content"><div class="link">Subroutine <a href="/source/main/subroutine/addvectortocoord.html">AddVectorToCoord</a> (category: Maths (Geometry))</div><div class="summary">Add a vector to a coordinate</div></div></div></div>

				<div class="codeBlockWrapper popupWrapper" id="popup-getobjectcoords"><div class="codeBlock"><div class="close">[X]</div><div class="content"><div class="link">Subroutine <a href="/source/main/subroutine/getobjectcoords.html">GetObjectCoords</a> (category: 3D objects)</div><div class="summary">Get an object's coordinates</div></div></div></div>

				<div class="codeBlockWrapper popupWrapper" id="popup-gettilealtitude"><div class="codeBlock"><div class="close">[X]</div><div class="content"><div class="link">Subroutine <a href="/source/main/subroutine/gettilealtitude.html">GetTileAltitude</a> (category: Landscape)</div><div class="summary">Calculate the altitude of a tile, optionally including platform objects and trees in the calculation</div></div></div></div>

				<div class="codeBlockWrapper popupWrapper" id="popup-boulderontile"><div class="codeBlock"><div class="close">[X]</div><div class="content"><div class="name">Variable <a href="/source/main/workspace/main_variable_workspace.html#boulderontile">boulderOnTile</a> in workspace <a href="/source/main/workspace/main_variable_workspace.html">Main variable workspace</a></div><div class="summary">A flag to record whether the tile being analysed in the GetTileAltitude routine contains a boulder</div></div></div></div>

				<div class="codeBlockWrapper popupWrapper" id="popup-considerobjects"><div class="codeBlock"><div class="close">[X]</div><div class="content"><div class="name">Variable <a href="/source/main/workspace/zero_page.html#considerobjects">considerObjects</a> in workspace <a href="/source/main/workspace/zero_page.html">Zero page</a></div><div class="summary">Controls whether the GetTileAltitude routine takes platform objects into consideration when calculating tile altitudes (bit 7) and returns details about the gaze vector (bit 6)</div></div></div></div>

				<div class="codeBlockWrapper popupWrapper" id="popup-enemycheckingrobot"><div class="codeBlock"><div class="close">[X]</div><div class="content"><div class="name">Variable <a href="/source/main/workspace/main_variable_workspace.html#enemycheckingrobot">enemyCheckingRobot</a> in workspace <a href="/source/main/workspace/main_variable_workspace.html">Main variable workspace</a></div><div class="summary">A flag to pass to the FollowGazeVector routine, with bit 7 set if the routine is being called when an enemy is checking to see if it can see a robot object</div></div></div></div>

				<div class="codeBlockWrapper popupWrapper" id="popup-gaze1"><div class="codeBlock"><div class="close">[X]</div><div class="content"><div class="name">Label <a href="/source/main/subroutine/followgazevector_part_1_of_5.html#gaze1">gaze1</a> is local to this routine</div></div></div></div>

				<div class="codeBlockWrapper popupWrapper" id="popup-gaze2"><div class="codeBlock"><div class="close">[X]</div><div class="content"><div class="name">Label <a href="/source/main/subroutine/followgazevector_part_1_of_5.html#gaze2">gaze2</a> is local to this routine</div></div></div></div>

				<div class="codeBlockWrapper popupWrapper" id="popup-gaze3"><div class="codeBlock"><div class="close">[X]</div><div class="content"><div class="name">Label <a href="/source/main/subroutine/followgazevector_part_1_of_5.html#gaze3">gaze3</a> is local to this routine</div></div></div></div>

				<div class="codeBlockWrapper popupWrapper" id="popup-gaze4"><div class="codeBlock"><div class="close">[X]</div><div class="content"><div class="name">Label <a href="/source/main/subroutine/followgazevector_part_1_of_5.html#gaze4">gaze4</a> is local to this routine</div></div></div></div>

				<div class="codeBlockWrapper popupWrapper" id="popup-gaze5"><div class="codeBlock"><div class="close">[X]</div><div class="content"><div class="name">Label <a href="/source/main/subroutine/followgazevector_part_2_of_5.html#gaze5">gaze5</a> in subroutine <a href="/source/main/subroutine/followgazevector_part_2_of_5.html">FollowGazeVector (Part 2 of 5)</a></div></div></div></div>

				<div class="codeBlockWrapper popupWrapper" id="popup-gazecanseetree"><div class="codeBlock"><div class="close">[X]</div><div class="content"><div class="name">Variable <a href="/source/main/workspace/main_variable_workspace.html#gazecanseetree">gazeCanSeeTree</a> in workspace <a href="/source/main/workspace/main_variable_workspace.html">Main variable workspace</a></div><div class="summary">A flag to record whether the gaze vector can see a tree</div></div></div></div>

				<div class="codeBlockWrapper popupWrapper" id="popup-targetontile"><div class="codeBlock"><div class="close">[X]</div><div class="content"><div class="name">Variable <a href="/source/main/workspace/main_variable_workspace.html#targetontile">targetOnTile</a> in workspace <a href="/source/main/workspace/main_variable_workspace.html">Main variable workspace</a></div><div class="summary">A flag to record whether the tile being analysed in the GetTileAltitude routine contains the target object whose number is in targetObject</div></div></div></div>

				<div class="codeBlockWrapper popupWrapper" id="popup-viewingobject"><div class="codeBlock"><div class="close">[X]</div><div class="content"><div class="name">Variable <a href="/source/main/workspace/zero_page.html#viewingobject">viewingObject</a> in workspace <a href="/source/main/workspace/zero_page.html">Zero page</a></div><div class="summary">The number of the viewing object</div></div></div></div>

				<div class="codeBlockWrapper popupWrapper" id="popup-xcoordhi"><div class="codeBlock"><div class="close">[X]</div><div class="content"><div class="name">Variable <a href="/source/main/workspace/zero_page.html#xcoordhi">xCoordHi</a> in workspace <a href="/source/main/workspace/zero_page.html">Zero page</a></div><div class="summary">The x-coordinate of an object or point (high byte)</div></div></div></div>

				<div class="codeBlockWrapper popupWrapper" id="popup-xobject"><div class="codeBlock"><div class="close">[X]</div><div class="content"><div class="link">Variable <a href="/source/main/variable/xobject.html">xObject</a> (category: 3D objects)</div><div class="summary">The x-coordinates in 3D space for the 3D objects</div></div></div></div>

				<div class="codeBlockWrapper popupWrapper" id="popup-xtile"><div class="codeBlock"><div class="close">[X]</div><div class="content"><div class="name">Variable <a href="/source/main/workspace/zero_page.html#xtile">xTile</a> in workspace <a href="/source/main/workspace/zero_page.html">Zero page</a></div><div class="summary">Tile corner x-coordinate</div></div></div></div>

				<div class="codeBlockWrapper popupWrapper" id="popup-yaccuracylo"><div class="codeBlock"><div class="close">[X]</div><div class="content"><div class="name">Variable <a href="/source/main/workspace/zero_page.html#yaccuracylo">yAccuracyLo</a> in workspace <a href="/source/main/workspace/zero_page.html">Zero page</a></div><div class="summary">The vertical accuracy for considering a tile as being seen by the viewer, as a fractional part</div></div></div></div>

				<div class="codeBlockWrapper popupWrapper" id="popup-ycoordhi"><div class="codeBlock"><div class="close">[X]</div><div class="content"><div class="name">Variable <a href="/source/main/workspace/zero_page.html#ycoordhi">yCoordHi</a> in workspace <a href="/source/main/workspace/zero_page.html">Zero page</a></div><div class="summary">The y-coordinate of an object or point (high byte)</div></div></div></div>

				<div class="codeBlockWrapper popupWrapper" id="popup-ycoordlo"><div class="codeBlock"><div class="close">[X]</div><div class="content"><div class="name">Variable <a href="/source/main/workspace/zero_page.html#ycoordlo">yCoordLo</a> in workspace <a href="/source/main/workspace/zero_page.html">Zero page</a></div><div class="summary">The y-coordinate of an object or point (low byte)</div></div></div></div>

				<div class="codeBlockWrapper popupWrapper" id="popup-yplatformlo"><div class="codeBlock"><div class="close">[X]</div><div class="content"><div class="name">Variable <a href="/source/main/workspace/zero_page.html#yplatformlo">yPlatformLo</a> in workspace <a href="/source/main/workspace/zero_page.html">Zero page</a></div><div class="summary">The low byte of the altitude of the Sentinel's tower or boulder when returning tile data from the GetTileAltitude routine</div></div></div></div>

				<div class="codeBlockWrapper popupWrapper" id="popup-yvectorlo"><div class="codeBlock"><div class="close">[X]</div><div class="content"><div class="name">Variable <a href="/source/main/workspace/zero_page.html#yvectorlo">yVectorLo</a> in workspace <a href="/source/main/workspace/zero_page.html">Zero page</a></div><div class="summary">The y-coordinate of a vector (low byte)</div></div></div></div>

				<div class="codeBlockWrapper popupWrapper" id="popup-zcoordhi"><div class="codeBlock"><div class="close">[X]</div><div class="content"><div class="name">Variable <a href="/source/main/workspace/zero_page.html#zcoordhi">zCoordHi</a> in workspace <a href="/source/main/workspace/zero_page.html">Zero page</a></div><div class="summary">The z-coordinate of an object or point (high byte)</div></div></div></div>

				<div class="codeBlockWrapper popupWrapper" id="popup-zobject"><div class="codeBlock"><div class="close">[X]</div><div class="content"><div class="link">Variable <a href="/source/main/variable/zobject.html">zObject</a> (category: 3D objects)</div><div class="summary">The z-coordinates in 3D space for the 3D objects</div></div></div></div>

				<div class="codeBlockWrapper popupWrapper" id="popup-ztile"><div class="codeBlock"><div class="close">[X]</div><div class="content"><div class="name">Variable <a href="/source/main/workspace/zero_page.html#ztile">zTile</a> in workspace <a href="/source/main/workspace/zero_page.html">Zero page</a></div><div class="summary">Tile corner z-coordinate</div></div></div></div>

				<div class="codeBlockWrapper nav">
					<nav class="codeBlock previousNext"><a class="previous" rel="prev" title="Previous routine" href="/source/main/subroutine/addvectortocoord.html">AddVectorToCoord</a><a class="next" rel="next" title="Next routine" href="/source/main/subroutine/followgazevector_part_2_of_5.html">FollowGazeVector (Part 2 of 5)</a></nav>
				</div>
			</article>

<?php
include_once("../../../templates_local/navigation.php");
?>
		</div>
	</body>
</html>
