<?php
include_once("../../../templates/template_functions.php");
page_header("keyboard", "subroutine_focusonkeyaction.html", "The FocusOnKeyAction subroutine", "Keyboard: FocusOnKeyAction", "Annotated code for the FocusOnKeyAction subroutine in The Sentinel", "the_sentinel-code", "source_keyboard", "subroutine_focusonkeyaction", "");
?>
				<div class="codeBlockWrapper nav">
					<nav class="codeBlock previousNext"><a class="previous" rel="prev" title="Previous routine" href="/source/main/subroutine/checkforkeypresses.html">CheckForKeyPresses</a><a class="next" rel="next" title="Next routine" href="/source/main/subroutine/checkforsamepankey.html">CheckForSamePanKey</a></nav>
				</div>

				<div class="codeBlockWrapper">
<pre class="codeBlock sourceCode initial"><div class="headerBlockWrapper"><div class="headerBlock"><span class="headerLabel">       Name:</span> <span class="headerEntry">FocusOnKeyAction</span>                                        <span class="routineLink">[<a class="extraDataLink" href="#">Show more</a>]</span>
<span class="headerLabel">       Type:</span> <span class="headerEntry">Subroutine</span>
<span class="headerLabel">   Category:</span> <span class="headerEntry">Keyboard</span>
<span class="headerLabel">    Summary:</span> <span class="headerEntry">Tell the game to start focusing effort on the action that has been</span>
             <span class="headerEntry">initiated, such as a pan of the landscape, absorb, transfer etc.</span>
<div class="extraData"><span class="headerLabel">    Context:</span> <span class="headerEntry">See this subroutine <a href="/source/all/the_sentinel_b.html#header-focusonkeyaction">in context in the source code</a></span>
<span class="headerLabel"> References:</span> <span class="headerEntry">This subroutine is called as follows:</span>
             <span class="headerEntry">* <a href="/source/main/subroutine/checkforkeypresses.html">CheckForKeyPresses</a> calls <a href="#focusonkeyaction">FocusOnKeyAction</a></span>
             <span class="headerEntry">* <a href="/source/main/subroutine/performhyperspace.html">PerformHyperspace</a> calls <a href="#focusonkeyaction">FocusOnKeyAction</a></span>
             <span class="headerEntry">* <a href="/source/main/subroutine/processactionkeys_part_1_of_2.html">ProcessActionKeys (Part 1 of 2)</a> calls <a href="#focusonkeyaction">FocusOnKeyAction</a></span>
             <span class="headerEntry">* <a href="/source/main/subroutine/processgameplay.html">ProcessGameplay</a> calls <a href="#focusonkeyaction">FocusOnKeyAction</a></span>
             <span class="headerEntry">* <a href="/source/main/subroutine/checkforkeypresses.html">CheckForKeyPresses</a> calls via <a href="#focu1">focu1</a></span></span>
</div>
<hr class="light">
<span class="subheader"> Other entry points:</span>

   <span class="argumentLabel">focu1</span>                <span class="argumentEntry">Store the current setting of focusOnKeyAction in the</span>
                        <span class="argumentEntry">previousFocus variable so we can detect (in the</span>
                        <span class="argumentEntry">ProcessGameplay routine) whether the player is still</span>
                        <span class="argumentEntry">holding down a pan key after we finish scrolling the</span>
                        <span class="argumentEntry">screen for the previous pan... and then return from the</span>
                        <span class="argumentEntry">subroutine</span>

</div></div>
<span class="label">.FocusOnKeyAction</span><a id="focusonkeyaction" class="anchor"></a>

 <span class="mne">LDA</span> <span class="hash">#</span><span class="binary">%10000000</span>         <span class="comment">\ Set bit 7 of focusOnKeyAction to tell the game to</span>
 <span class="mne">STA</span> <a class="popup variable">focusOnKeyAction</a>   <span class="comment">\ focus effort on implementing the key action that has</span>
                        <span class="comment">\ just been initiated, such as a pan of the landscape</span>
                        <span class="comment">\ view, absorb, transfer and so on</span>

 <span class="mne">STA</span> <a class="popup variable">doNotDitherObject</a>  <span class="comment">\ Set bit 7 of doNotDitherObject to disable updating of</span>
                        <span class="comment">\ objects on-screen using a dithered effect, so we don't</span>
                        <span class="comment">\ dither any object changes onto the screen while we are</span>
                        <span class="comment">\ focusing on processing the action, which itself might</span>
                        <span class="comment">\ need to update the screen when it's done</span>

<span class="label">.focu1</span><a id="focu1" class="anchor"></a>

 <span class="mne">LDA</span> <a class="popup variable">focusOnKeyAction</a>   <span class="comment">\ Set previousFocus = focusOnKeyAction so we can detect</span>
 <span class="mne">STA</span> <a class="popup variable">previousFocus</a>      <span class="comment">\ whether the value of focusOnKeyAction changes</span>
                        <span class="comment">\</span>
                        <span class="comment">\ This is used by the ProcessGameplay routine to detect</span>
                        <span class="comment">\ whether the player is still holding the same pan key</span>
                        <span class="comment">\ down after we finish scrolling the screen for the pan</span>

 <span class="mne">RTS</span>                    <span class="comment">\ Return from the subroutine</span>
</pre>
				</div>

				<div class="codeBlockWrapper popupWrapper" id="popup-donotditherobject"><div class="codeBlock"><div class="close">[X]</div><div class="content"><div class="name">Variable <a href="/source/main/workspace/main_variable_workspace.html#donotditherobject">doNotDitherObject</a> in workspace <a href="/source/main/workspace/main_variable_workspace.html">Main variable workspace</a></div><div class="summary">Controls whether the DitherScreenBuffer routine can update an object on the screen using a dithered effect</div></div></div></div>

				<div class="codeBlockWrapper popupWrapper" id="popup-focusonkeyaction"><div class="codeBlock"><div class="close">[X]</div><div class="content"><div class="name">Variable <a href="/source/main/workspace/main_variable_workspace.html#focusonkeyaction">focusOnKeyAction</a> in workspace <a href="/source/main/workspace/main_variable_workspace.html">Main variable workspace</a></div><div class="summary">A flag that determines whether the game should focus effort on implementing a key action, such as a pan of the landscape view</div></div></div></div>

				<div class="codeBlockWrapper popupWrapper" id="popup-previousfocus"><div class="codeBlock"><div class="close">[X]</div><div class="content"><div class="name">Variable <a href="/source/main/workspace/main_variable_workspace.html#previousfocus">previousFocus</a> in workspace <a href="/source/main/workspace/main_variable_workspace.html">Main variable workspace</a></div><div class="summary">The previous setting of focusOnKeyAction, so we can detect (in the ProcessGameplay routine) whether the player is still holding down a pan key after we finish scrolling the screen for the previous pan</div></div></div></div>

				<div class="codeBlockWrapper nav">
					<nav class="codeBlock previousNext"><a class="previous" rel="prev" title="Previous routine" href="/source/main/subroutine/checkforkeypresses.html">CheckForKeyPresses</a><a class="next" rel="next" title="Next routine" href="/source/main/subroutine/checkforsamepankey.html">CheckForSamePanKey</a></nav>
				</div>
			</article>

<?php
include_once("../../../templates_local/navigation.php");
?>
		</div>
	</body>
</html>
