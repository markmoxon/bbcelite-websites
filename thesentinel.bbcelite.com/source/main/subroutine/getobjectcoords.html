<?php
include_once("../../../templates/template_functions.php");
page_header("3d_objects", "subroutine_getobjectcoords.html", "The GetObjectCoords subroutine", "3D objects: GetObjectCoords", "Annotated code for the GetObjectCoords subroutine in The Sentinel", "the_sentinel-code", "source_3d_objects", "subroutine_getobjectcoords", "");
?>
				<div class="codeBlockWrapper nav">
					<nav class="codeBlock previousNext"><a class="previous" rel="prev" title="Previous routine" href="/source/main/subroutine/checkfortilecentre.html">CheckForTileCentre</a><a class="next" rel="next" title="Next routine" href="/source/main/subroutine/deleteobject.html">DeleteObject</a></nav>
				</div>

				<div class="codeBlockWrapper">
<pre class="codeBlock sourceCode initial"><div class="headerBlockWrapper"><div class="headerBlock"><span class="headerLabel">       Name:</span> <span class="headerEntry">GetObjectCoords</span>                                         <span class="routineLink">[<a class="extraDataLink" href="#">Show more</a>]</span>
<span class="headerLabel">       Type:</span> <span class="headerEntry">Subroutine</span>
<span class="headerLabel">   Category:</span> <span class="headerEntry">3D objects</span>
<span class="headerLabel">    Summary:</span> <span class="headerEntry">Get an object's coordinates</span>
<div class="extraData"><span class="headerLabel">    Context:</span> <span class="headerEntry">See this subroutine <a href="/source/all/the_sentinel_d.html#header-getobjectcoords">in context in the source code</a></span>
<span class="headerLabel"> References:</span> <span class="headerEntry">This subroutine is called as follows:</span>
             <span class="headerEntry">* <a href="/source/main/subroutine/followgazevector_part_1_of_5.html">FollowGazeVector (Part 1 of 5)</a> calls <a href="#getobjectcoords">GetObjectCoords</a></span>
             <span class="headerEntry">* <a href="/source/main/subroutine/getrowvisibility_part_1_of_2.html">GetRowVisibility (Part 1 of 2)</a> calls <a href="#getobjectcoords">GetObjectCoords</a></span>
</div>
<hr class="light">
 This routine fetches the cartesian coordinates of object #X as three 24-bit
 numbers, as follows:

   xCoord(Hi Lo Bot)

   yCoord(Hi Lo Bot)

   zCoord(Hi Lo Bot)

 The high byte can be thought of as the integer with low and bottom bytes as
 the fractional part.

 Tile corners are integers in the x- and z-axis, and objects are placed in the
 centre of tiles by setting the fractional part to 0.5. So an object that's
 been placed directly on the tile that's anchored at (2, y, 3) will appear at
 (2.5, y, 3.5).

 The y-coordinate - i.e. the altitude of the object above the tile itself -
 depends on the object type and whether it is stacked on top of another object.

<hr class="light">
<span class="subheader"> Arguments:</span>

   <span class="argumentLabel">X</span>                    <span class="argumentEntry">An object number</span>

</div></div>
<span class="label">.GetObjectCoords</span><a id="getobjectcoords" class="anchor"></a>

 <span class="mne">LDA</span> <span class="hash">#</span><span class="decimal">0</span>                 <span class="comment">\ Set the bottom byte of each coordinate to zero</span>
 <span class="mne">STA</span> <a class="popup variable">xCoordBot</a>
 <span class="mne">STA</span> <a class="popup variable">yCoordBot</a>
 <span class="mne">STA</span> <a class="popup variable">zCoordBot</a>

 <span class="mne">LDA</span> <span class="hash">#</span><span class="decimal">128</span>               <span class="comment">\ Set the low byte of the x- and -z-coordinates to 128</span>
 <span class="mne">STA</span> <a class="popup variable">xCoordLo</a>           <span class="comment">\ (which represents 0.5, so the object sits in the</span>
 <span class="mne">STA</span> <a class="popup variable">zCoordLo</a>           <span class="comment">\ middle of the tile on which it is placed)</span>

 <span class="mne">LDA</span> <a class="popup variable">yObjectLo</a>,<span class="register">X</span>        <span class="comment">\ Set the low byte of the y-coordinate to the altitude</span>
 <span class="mne">STA</span> <a class="popup variable">yCoordLo</a>           <span class="comment">\ of object #X</span>

 <span class="mne">LDA</span> <a class="popup variable">xObject</a>,<span class="register">X</span>          <span class="comment">\ Set the high byte of the x-coordinate to the value for</span>
 <span class="mne">STA</span> <a class="popup variable">xCoordHi</a>           <span class="comment">\ object #X from the xObject table</span>

 <span class="mne">LDA</span> <a class="popup variable">yObjectHi</a>,<span class="register">X</span>        <span class="comment">\ Set the high byte of the y-coordinate to the value for</span>
 <span class="mne">STA</span> <a class="popup variable">yCoordHi</a>           <span class="comment">\ object #X from the yObjectHi table</span>

 <span class="mne">LDA</span> <a class="popup variable">zObject</a>,<span class="register">X</span>          <span class="comment">\ Set the high byte of the z-coordinate to the value for</span>
 <span class="mne">STA</span> <a class="popup variable">zCoordHi</a>           <span class="comment">\ object #X from the zObject table</span>

 <span class="mne">RTS</span>                    <span class="comment">\ Return from the subroutine</span>
</pre>
				</div>

				<div class="codeBlockWrapper popupWrapper" id="popup-xcoordbot"><div class="codeBlock"><div class="close">[X]</div><div class="content"><div class="name">Variable <a href="/source/main/workspace/zero_page.html#xcoordbot">xCoordBot</a> in workspace <a href="/source/main/workspace/zero_page.html">Zero page</a></div><div class="summary">The x-coordinate of an object or point (bottom byte)</div></div></div></div>

				<div class="codeBlockWrapper popupWrapper" id="popup-xcoordhi"><div class="codeBlock"><div class="close">[X]</div><div class="content"><div class="name">Variable <a href="/source/main/workspace/zero_page.html#xcoordhi">xCoordHi</a> in workspace <a href="/source/main/workspace/zero_page.html">Zero page</a></div><div class="summary">The x-coordinate of an object or point (high byte)</div></div></div></div>

				<div class="codeBlockWrapper popupWrapper" id="popup-xcoordlo"><div class="codeBlock"><div class="close">[X]</div><div class="content"><div class="name">Variable <a href="/source/main/workspace/zero_page.html#xcoordlo">xCoordLo</a> in workspace <a href="/source/main/workspace/zero_page.html">Zero page</a></div><div class="summary">The x-coordinate of an object or point (low byte)</div></div></div></div>

				<div class="codeBlockWrapper popupWrapper" id="popup-xobject"><div class="codeBlock"><div class="close">[X]</div><div class="content"><div class="link">Variable <a href="/source/main/variable/xobject.html">xObject</a> (category: 3D objects)</div><div class="summary">The x-coordinates in 3D space for the 3D objects</div></div></div></div>

				<div class="codeBlockWrapper popupWrapper" id="popup-ycoordbot"><div class="codeBlock"><div class="close">[X]</div><div class="content"><div class="name">Variable <a href="/source/main/workspace/zero_page.html#ycoordbot">yCoordBot</a> in workspace <a href="/source/main/workspace/zero_page.html">Zero page</a></div><div class="summary">The y-coordinate of an object or point (bottom byte)</div></div></div></div>

				<div class="codeBlockWrapper popupWrapper" id="popup-ycoordhi"><div class="codeBlock"><div class="close">[X]</div><div class="content"><div class="name">Variable <a href="/source/main/workspace/zero_page.html#ycoordhi">yCoordHi</a> in workspace <a href="/source/main/workspace/zero_page.html">Zero page</a></div><div class="summary">The y-coordinate of an object or point (high byte)</div></div></div></div>

				<div class="codeBlockWrapper popupWrapper" id="popup-ycoordlo"><div class="codeBlock"><div class="close">[X]</div><div class="content"><div class="name">Variable <a href="/source/main/workspace/zero_page.html#ycoordlo">yCoordLo</a> in workspace <a href="/source/main/workspace/zero_page.html">Zero page</a></div><div class="summary">The y-coordinate of an object or point (low byte)</div></div></div></div>

				<div class="codeBlockWrapper popupWrapper" id="popup-yobjecthi"><div class="codeBlock"><div class="close">[X]</div><div class="content"><div class="link">Variable <a href="/source/main/variable/yobjecthi.html">yObjectHi</a> (category: 3D objects)</div><div class="summary">The y-coordinates in 3D space for the 3D objects (high byte)</div></div></div></div>

				<div class="codeBlockWrapper popupWrapper" id="popup-yobjectlo"><div class="codeBlock"><div class="close">[X]</div><div class="content"><div class="link">Variable <a href="/source/main/variable/yobjectlo.html">yObjectLo</a> (category: 3D objects)</div><div class="summary">The y-coordinates in 3D space for the 3D objects (low byte)</div></div></div></div>

				<div class="codeBlockWrapper popupWrapper" id="popup-zcoordbot"><div class="codeBlock"><div class="close">[X]</div><div class="content"><div class="name">Variable <a href="/source/main/workspace/zero_page.html#zcoordbot">zCoordBot</a> in workspace <a href="/source/main/workspace/zero_page.html">Zero page</a></div><div class="summary">The z-coordinate of an object or point (bottom byte)</div></div></div></div>

				<div class="codeBlockWrapper popupWrapper" id="popup-zcoordhi"><div class="codeBlock"><div class="close">[X]</div><div class="content"><div class="name">Variable <a href="/source/main/workspace/zero_page.html#zcoordhi">zCoordHi</a> in workspace <a href="/source/main/workspace/zero_page.html">Zero page</a></div><div class="summary">The z-coordinate of an object or point (high byte)</div></div></div></div>

				<div class="codeBlockWrapper popupWrapper" id="popup-zcoordlo"><div class="codeBlock"><div class="close">[X]</div><div class="content"><div class="name">Variable <a href="/source/main/workspace/zero_page.html#zcoordlo">zCoordLo</a> in workspace <a href="/source/main/workspace/zero_page.html">Zero page</a></div><div class="summary">The z-coordinate of an object or point (low byte)</div></div></div></div>

				<div class="codeBlockWrapper popupWrapper" id="popup-zobject"><div class="codeBlock"><div class="close">[X]</div><div class="content"><div class="link">Variable <a href="/source/main/variable/zobject.html">zObject</a> (category: 3D objects)</div><div class="summary">The z-coordinates in 3D space for the 3D objects</div></div></div></div>

				<div class="codeBlockWrapper nav">
					<nav class="codeBlock previousNext"><a class="previous" rel="prev" title="Previous routine" href="/source/main/subroutine/checkfortilecentre.html">CheckForTileCentre</a><a class="next" rel="next" title="Next routine" href="/source/main/subroutine/deleteobject.html">DeleteObject</a></nav>
				</div>
			</article>

<?php
include_once("../../../templates_local/navigation.php");
?>
		</div>
	</body>
</html>
