<?php
include_once("../templates/template_functions.php");
page_header("hacks", "elite_compendium_acorn_electron_technical_information.html", "Technical information on the Compendium version of Acorn Electron Elite", "Technical information on the Compendium version of Acorn Electron Elite", "Details of how to backport BBC Micro disc Elite to the Acorn Electron using sideways RAM", "elite", "hacks_elite_compendium", "acorn_electron");
?>
				<div class="codeBlockWrapper nav">
					<nav class="codeBlock previousNext"><a class="previous" rel="prev" title="Previous page" href="elite_compendium_acorn_electron_downloads.html">Playing the Compendium version of Electron Elite</a><a class="next" rel="next" title="Next page" href="teletext_elite.html">Teletext Elite</a></nav>
				</div>

				<div class="codeBlockWrapper">
					<div class="codeBlock article">
						<h2 class="articleSubheader deepDive">Updating Acorn Electron Elite with all the bells and whistles</h2>

						<p>The Compendium version of Electron Elite is a massively extended and enhanced variant of the original, but at its core it is still Acorn Electron Elite: all the extra features have been added on, rather than this being a backport from a different platform. Fans of the original will feel right at home, as this is still the original, just better.</p>

						<p>In this article I'll take a deeper look at all the extra features, especially the use of sideways RAM, which gives the game a considerable speed boost compared to the 1984 original.</p>

						<p>If you want to see exactly how the code for the Compendium version of Electron Elite differs from the code in the original Acornsoft version, you can check out the <a href="https://github.com/markmoxon/elite-source-code-acorn-electron/tree/elite-compendium/1-source-files/main-sources">elite-compendium branch</a> in the project's repository. Search the source code files for "Mod:" to see every single modification to the original version.</p>

						<h2 class="articleSubheader">Speeding up the Acorn Electron version<br>
													 --------------------------------------</h2>

						<p>On the Acorn Electron, the Compendium version of Elite is a lot faster than the original. Here's a side-by-side comparison, with the original version on the left and the Compendium on the right:</p>

						<video width="80%" controls="controls" style="margin: auto; margin-bottom: 2ch">
							<source src="/media/elite_compendium/electron_original_vs_compendium.mp4" type="video/mp4">
						</video>

						<p>The bulk of this improvement is down to the use of sideways RAM. All versions of the Elite Compendium use sideways RAM, but on the Electron the impact is far more profound than simply having more memory to play with.</p>

						<p>On the Electron, the custom ULA controls the entire system, and all memory access is done via the ULA. Due to cost-cutting in the design of the RAM system and the need to interleave screen memory access with main memory, code can only access locations in main memory at 1MHz, which is half the 2MHz access speed that the BBC Micro boasts. This is the primary reason that the Electron is noticeably slower than the BBC Micro.</p>

						<p>However, this speed restriction only applies to main memory, i.e. from address &amp;0000 to &amp;7FFF. Memory from &amp;8000 to &amp;FFFF is accessed at the full 2MHz, so fetching data and instructions from the operating system and language ROMs is as fast as on the BBC Micro. And because sideways RAM lives at &amp;8000, it can also be accessed at 2MHz. The Electron has the same 2MHz 6502 CPU as the BBC Micro, so code that lives above &amp;8000 and which only accesses data from above &amp;8000 will effectively run at the same speed as the BBC Micro.</p>

						<p>For the Compendium version of Electron Elite, I've moved all speed-critical code and variables into sideways RAM. I've left zero page alone, as although it is accessed at 1MHz, the 6502's faster and smaller zero-page instructions cancel out any advantage of moving zero page variables into sideways RAM.</p>

						<p>The speed difference is impressive. It doesn't run as fast as BBC Micro Elite, because we still have to access screen memory at 1MHz (as screen memory runs from &amp;5800 to &amp;7FFF), but outside of screen-poking, the core flight code runs as fast as it possibly can. Non-critical code still lives in main memory, as we don't need to speed up aspects like trading, charts or saving commander files, but everything that matters is now in sideways RAM.</p>

						<p>On top of this, I've backported the logarithm-based multiplication and division routines from the 6502 Second Processor, which run noticeably faster than the loop-based routines from the original version (though they take up a lot more memory). And I've backported various specialist routines, such as the dedicated horizontal line-drawing routine at HLOIN, which were left out of the Electron version due to a lack of free space.</p>

						<p>In all, this extra speed and memory means the Electron can finally run all the features of BBC Micro Elite, and without grinding to a halt.</p>

						<h2 class="articleSubheader">New features in the Acorn Electron version<br>
													 ------------------------------------------</h2>

						<p>For the Compendium version of Acorn Electron Elite, I not only wanted to backport all the extra features from the BBC Micro disc version of Elite, but I also wanted to add as many extra Compendium features as possible.</p>

						<p>With the exception of the four-colour dashboard and Bitstik support, Electron players can now enjoy everything that the BBC Micro had back in 1984. Here's a complete list of features I've added to the Compendium version of Electron Elite, and below that is a blow-by-blow comparison between the various versions.</p>

						<p>Features have been backported from the BBC micro disc version of Elite, unless otherwise stated.</p>

						<ul>
							<li>Speed improvements
								<ul>
									<li>Significant speed increase over the standard version due to fast sideways RAM</li>
									<li>Logarithm-based maths routines for a further speed boost (6502 Second Processor)</li>
									<li>Optimised routines (such as HLOIN) backported from various other 6502 versions</li>
								</ul>
							</li>

							<li>Graphical improvements
								<ul>
									<li>Flicker-free ships (BBC Master)</li>
									<li>Flicker-free planets (using the same algorithm as ships)</li>
									<li>Circular planets with meridians, equators and craters (no more 50p planets!)</li>
									<li>Energy bomb lightning effect (BBC Master)</li>
									<li>Escape capsule animation</li>
									<li>Three sizes of stardust rather than two (one-pixel stardust added)</li>
									<li>Variable star sizes in the Short-range Chart</li>
								</ul>
							</li>

							<li>In-station features
								<ul>
									<li>Extra lasers (military, mining)</li>
									<li>Improved selling mechanism (sell all or part of your cargo)</li>
									<li>Extended system descriptions (edible poets!)</li>
									<li>System search in the Long-range Chart</li>
									<li>Hold SHIFT to move the chart pointer more quickly</li>
								</ul>
							</li>

							<li>In-flight features
								<ul>
									<li>All 31 ship and station designs from the BBC Micro disc version</li>
									<li>Advanced enemy tactics (NEWB) and spawning logic</li>
									<li>Suns, cabin temperatures and fuel scooping</li>
									<li>Fuel scoops only work when moving (NES)</li>
									<li>Asteroid mining</li>
									<li>Thargoids and witchspace</li>
								</ul>
							</li>

							<li>Docking
								<ul>
									<li>Proper docking computer sequence</li>
									<li>Pressing "J" will dock instantly when docking computer is activated (NES)</li>
									<li>Transporters no longer spawn in the station slot when we're auto-docking (NES)</li>
									<li>Docking fee for using the docking computer (NES)</li>
									<li>The ship hangar is shown on docking</li>
								</ul>
							</li>

							<li>Missions
								<ul>
									<li>Both BBC Micro missions (Constrictor and Thargoid plans)</li>
									<li>Trumbles mission (Commodore 64 and NES)</li>
								</ul>
							</li>

							<li>Loading and saving
								<ul>
									<li>Disc access menu for saving, loading, cataloguing and deleting commander files</li>
									<li>Full support for ADFS, DFS and MMFS on all media, including the Plus 3</li>
									<li>The Acornsoft loading screen no longer has the panel for showing tape progress</li>
								</ul>
							</li>

							<li>Joysticks
								<ul>
									<li>Joystick support added for Plus 1 analogue joysticks (BBC Micro)</li>
									<li>Joystick support added for Slogger and First Byte digital joysticks (BBC Master Compact)</li>
									<li>Keyboard fire button still works when joysticks are enabled (BBC Master)</li>
								</ul>
							</li>

							<li>Bug fixes and tweaks
								<ul>
									<li>Includes bug fixes from the Elite Compendium (Data on System, Moray spawning)</li>
									<li>Broken sound priorities and durations have been fixed in the sound generation routine</li>
									<li>The second title screen now has a rotating Constrictor instead of a Mamba (so the Compendium has its own unique ship, rather than reusing the BBC Micro cassette's Mamba)</li>
								</ul>
							</li>
						</ul>

						<p>Notes:</p>

						<ul>
							<li>When launching, hyperspacing, docking and restarting, there is a small pause while the game loads ship blueprints from disc, just like the BBC Micro disc version.</li>

							<li>When using ADFS on the Plus 3, the screen might flicker during disc access.</li>

							<li>All features from the original BBC Micro disc version are included except for the four-colour dashboard and Bitstik.</li>

							<li>All features from the Elite Compendium are included except for music, volume control and Delta 14B support (the standard Electron can't physically support the last two).</li>

							<li>I am investigating adding music and the four-colour dashboard.</li>
						</ul>

						<p>Here's a feature-by-feature comparison showing how the Compendium version of Electron Elite has finally caught up with the original 1984 versions. (See the full <a href="/compare/feature_comparison.html">feature comparison table</a> for more information on the items in the table and to compare all the other versions of 6502 Elite.)</p>
					</div>

					<div class="codeBlock compare" style="max-width: 115ch; overflow: none;">
						<table class="spacedTableBorder codeSummary middle border sticky-column-1">
							<tr class="codeSummaryHeader"><th style="min-width: 20ch">Feature</th><th class="center">BBC Micro Cassette</th><th class="center">BBC Micro Disc</th><th class="center">Compendium Electron</th><th class="center">Standard Electron</th></tr>

							<tr><td>Release year</td><td class="center">1984</td><td class="center">1984</td><td class="center">2025</td><td class="center">1984</td></tr>

							<tr><td>Ship types</td><td class="center">13</td><td class="center">31</td><td class="center">31</td><td class="center">11</td></tr>

							<tr><td>Thargoids, Thargons</td><td class="center yes">Yes</td><td class="center yes">Yes</td><td class="center yes">Yes</td><td class="center no">No</td></tr>

							<tr><td>Dodo space station</td><td class="center no">No</td><td class="center yes">Yes</td><td class="center yes">Yes</td><td class="center no">No</td></tr>

							<tr><td>Cougar</td><td class="center no">No</td><td class="center no">No</td><td class="center no">No</td><td class="center no">No</td></tr>

							<tr><td>Cougar has a cloaking device</td><td class="center">n/a</td><td class="center">n/a</td><td class="center">n/a</td><td class="center">n/a</td></tr>

							<tr><td>Rock hermits</td><td class="center no">No</td><td class="center no">No</td><td class="center no">No</td><td class="center no">No</td></tr>

							<tr><td>Distinct ship designs</td><td class="center">12</td><td class="center">29</td><td class="center">29</td><td class="center">10</td></tr>

							<tr><td>Max. ships in the local bubble</td><td class="center">10</td><td class="center">10</td><td class="center">10</td><td class="center">10</td></tr>

							<tr><td>Max. cops in the local bubble</td><td class="center">4</td><td class="center">4</td><td class="center">3</td><td class="center">3</td></tr>

							<tr><td>Bytes in each ship's data block</td><td class="center">36</td><td class="center">37</td><td class="center">37</td><td class="center">36</td></tr>

							<tr><td>Enhanced AI and spawning (NEWB)</td><td class="center no">No</td><td class="center yes">Yes</td><td class="center yes">Yes</td><td class="center no">No</td></tr>

							<tr><td>Ships that Anacondas can spawn</td><td class="center">n/a</td><td class="center">Worm</td><td class="center">Worm</td><td class="center">n/a</td></tr>

							<tr><td>Colours in the space view</td><td class="center">2</td><td class="center">2</td><td class="center">2</td><td class="center">2</td></tr>

							<tr><td>Colours in the dashboard</td><td class="center">4</td><td class="center">4</td><td class="center">2</td><td class="center">2</td></tr>

							<tr><td>Flashing dashboard indicators</td><td class="center yes">Yes</td><td class="center yes">Yes</td><td class="center no">No</td><td class="center no">No</td></tr>

							<tr><td>Ship colours in the 3D scanner</td><td class="center">2</td><td class="center">2</td><td class="center">1</td><td class="center">1</td></tr>

							<tr><td>Dot height in the 3D scanner (pixels)</td><td class="center">2</td><td class="center">2</td><td class="center">2</td><td class="center">2</td></tr>

							<tr><td>Compass dot (in front)</td><td class="center">Thick yellow</td><td class="center">Thick yellow</td><td class="center">Thick white</td><td class="center">Thick white</td></tr>

							<tr><td>Compass dot (behind)</td><td class="center">Thin green</td><td class="center">Thin green</td><td class="center">Thin white</td><td class="center">Thin white</td></tr>

							<tr><td>Space view height (pixels)</td><td class="center">192</td><td class="center">192</td><td class="center">192</td><td class="center">192</td></tr>

							<tr><td>Space view width (pixels)</td><td class="center">256</td><td class="center">256</td><td class="center">256</td><td class="center">256</td></tr>

							<tr><td>Dashboard height (pixels)</td><td class="center">56</td><td class="center">56</td><td class="center">56</td><td class="center">56</td></tr>

							<tr><td>Dashboard width (pixels)</td><td class="center">128</td><td class="center">128</td><td class="center">256</td><td class="center">256</td></tr>

							<tr><td>Escape pod colour scheme</td><td class="center">Palette</td><td class="center">Palette</td><td class="center no">No</td><td class="center no">No</td></tr>

							<tr><td>Mining lasers and asteroid mining</td><td class="center no">No</td><td class="center yes">Yes</td><td class="center yes">Yes</td><td class="center no">No</td></tr>

							<tr><td>Military lasers</td><td class="center no">No</td><td class="center yes">Yes</td><td class="center yes">Yes</td><td class="center no">No</td></tr>

							<tr><td>Crosshair colour varies with laser type</td><td class="center no">No</td><td class="center no">No</td><td class="center no">No</td><td class="center no">No</td></tr>

							<tr><td>Crosshair design varies with laser type</td><td class="center no">No</td><td class="center no">No</td><td class="center no">No</td><td class="center no">No</td></tr>

							<tr><td>Enemy laser colour</td><td class="center">White</td><td class="center">White</td><td class="center">White</td><td class="center">White</td></tr>

							<tr><td>Proper docking computer</td><td class="center no">No</td><td class="center yes">Yes</td><td class="center yes">Yes</td><td class="center no">No</td></tr>

							<tr><td>Sun, fuel scooping, cabin temperature</td><td class="center yes">Yes</td><td class="center yes">Yes</td><td class="center yes">Yes</td><td class="center no">No</td></tr>

							<tr><td>Planet meridians and craters</td><td class="center yes">Yes</td><td class="center yes">Yes</td><td class="center yes">Yes</td><td class="center no">No</td></tr>

							<tr><td>Extended text tokens</td><td class="center no">No</td><td class="center yes">Yes</td><td class="center yes">Yes</td><td class="center no">No</td></tr>

							<tr><td>Extended system descriptions</td><td class="center no">No</td><td class="center yes">Yes</td><td class="center yes">Yes</td><td class="center no">No</td></tr>

							<tr><td>Missions</td><td class="center no">No</td><td class="center">2</td><td class="center">3</td><td class="center no">No</td></tr>

							<tr><td>Energy bomb kills Constrictor</td><td class="center">n/a</td><td class="center yes">Yes</td><td class="center yes">Yes</td><td class="center">n/a</td></tr>

							<tr><td>Energy bomb kills Thargoids</td><td class="center yes">Yes</td><td class="center yes">Yes</td><td class="center yes">Yes</td><td class="center">n/a</td></tr>

							<tr><td>Energy bomb graphical effect</td><td class="center">Flash</td><td class="center">Flash</td><td class="center">Lightning</td><td class="center no">No</td></tr>

							<tr><td>"Press Fire or Space" ship</td><td class="center">Mamba</td><td class="center">Krait</td><td class="center">Constrictor</td><td class="center">Mamba</td></tr>

							<tr><td>Search for systems by name</td><td class="center no">No</td><td class="center yes">Yes</td><td class="center yes">Yes</td><td class="center no">No</td></tr>

							<tr><td>Key to move chart pointer quickly</td><td class="center no">No</td><td class="center">SHIFT</td><td class="center">SHIFT</td><td class="center no">No</td></tr>

							<tr><td>Buy/sell specific amounts of cargo</td><td class="center no">No</td><td class="center yes">Yes</td><td class="center yes">Yes</td><td class="center no">No</td></tr>

							<tr><td>Buy all available cargo with "Y"</td><td class="center no">No</td><td class="center yes">Yes</td><td class="center yes">Yes</td><td class="center no">No</td></tr>

							<tr><td>Display ship hangar on docking</td><td class="center no">No</td><td class="center yes">Yes</td><td class="center yes">Yes</td><td class="center no">No</td></tr>

							<tr><td>Launch tunnel colour</td><td class="center">White</td><td class="center">White</td><td class="center">White</td><td class="center">White</td></tr>

							<tr><td>Disc access menu</td><td class="center no">No</td><td class="center yes">Yes</td><td class="center yes">Yes</td><td class="center no">No</td></tr>

							<tr><td>Revert to default commander</td><td class="center no">No</td><td class="center no">No</td><td class="center no">No</td><td class="center no">No</td></tr>

							<tr><td>Fractional kill counts</td><td class="center no">No</td><td class="center no">No</td><td class="center no">No</td><td class="center no">No</td></tr>

							<tr><td>Kill count varies by ship type</td><td class="center no">No</td><td class="center no">No</td><td class="center no">No</td><td class="center no">No</td></tr>

							<tr><td>Kill count for cargo, asteroids, escape pods, Thargons</td><td class="center no">No</td><td class="center yes">Yes</td><td class="center yes">Yes</td><td class="center no">No</td></tr>

							<tr><td>"S/E" indicator width (in space view pixels)</td><td class="center">6</td><td class="center">6</td><td class="center">7</td><td class="center">7</td></tr>

							<tr><td>Fuel goes red when low</td><td class="center yes">Yes</td><td class="center yes">Yes</td><td class="center no">No</td><td class="center no">No</td></tr>

							<tr><td>Volume control</td><td class="center no">No</td><td class="center no">No</td><td class="center no">No</td><td class="center no">No</td></tr>

							<tr><td>Sound effects</td><td class="center">Standard</td><td class="center">Standard</td><td class="center">Basic</td><td class="center">Basic</td></tr>

							<tr><td>Laser sound attack phase amplitude</td><td class="center">112</td><td class="center">126</td><td class="center">n/a</td><td class="center">n/a</td></tr>

							<tr><td>Save screenshot</td><td class="center no">No</td><td class="center no">No</td><td class="center no">No</td><td class="center no">No</td></tr>

							<tr><td>Send trade screens to printer</td><td class="center no">No</td><td class="center no">No</td><td class="center no">No</td><td class="center no">No</td></tr>

							<tr><td>Logarithm-based maths routines</td><td class="center no">No</td><td class="center no">No</td><td class="center yes">Yes</td><td class="center no">No</td></tr>

							<tr><td>Hostile ships spawning distance</td><td class="center">32</td><td class="center">25</td><td class="center">32</td><td class="center">32</td></tr>

							<tr><td>Galactic hyperspace counts down from</td><td class="center">15</td><td class="center">15</td><td class="center">15</td><td class="center">15</td></tr>

							<tr><td>Hyperspace countdown text column</td><td class="center">5</td><td class="center">6</td><td class="center">5</td><td class="center">5</td></tr>

							<tr><td>Rings in the hyperspace tunnel</td><td class="center">16</td><td class="center">16</td><td class="center">16</td><td class="center">16</td></tr>

							<tr><td>Witchspace</td><td class="center yes">Yes</td><td class="center yes">Yes</td><td class="center yes">Yes</td><td class="center no">No</td></tr>

							<tr><td>Launch escape pod in witchspace</td><td class="center">Fatal</td><td class="center yes">Yes</td><td class="center yes">Yes</td><td class="center">n/a</td></tr>

							<tr><td>Thargoids in witchspace</td><td class="center">4</td><td class="center">4</td><td class="center">2</td><td class="center">n/a</td></tr>

							<tr><td>Docking check #3</td><td class="center yes">Yes</td><td class="center no">No</td><td class="center yes">Yes</td><td class="center yes">Yes</td></tr>

							<tr><td>Docking check #4 vector</td><td class="center">Station</td><td class="center">Planet</td><td class="center">Station</td><td class="center">Station</td></tr>

							<tr><td>Docking check #4 angle</td><td class="center">22.0&deg;</td><td class="center">26.3&deg;</td><td class="center">22.0&deg;</td><td class="center">22.0&deg;</td></tr>

							<tr><td>Medium circle radius range</td><td class="center">8-60</td><td class="center">8-60</td><td class="center">8-60</td><td class="center">9+</td></tr>

							<tr><td>Explosion particles per vertex</td><td class="center">15</td><td class="center">15</td><td class="center">7</td><td class="center">7</td></tr>

							<tr><td>Stardust particles</td><td class="center">18</td><td class="center">18</td><td class="center">10</td><td class="center">10</td></tr>

							<tr><td>Top laser line vertical offset</td><td class="center">0</td><td class="center">0</td><td class="center">0</td><td class="center">0</td></tr>

							<tr><td>In-flight message position</td><td class="center">Column 9</td><td class="center">Column 9</td><td class="center">Column 9</td><td class="center">Column 9</td></tr>

							<tr><td>Max. junk shown on our death</td><td class="center">4</td><td class="center">5</td><td class="center">4</td><td class="center">4</td></tr>

							<tr><td>Version bit number in save file</td><td class="center">1</td><td class="center">2 or 5</td><td class="center">3</td><td class="center">3</td></tr>

							<tr><td>"Star Wars" scroll text and demo</td><td class="center no">No</td><td class="center no">No</td><td class="center no">No</td><td class="center no">No</td></tr>

							<tr><td>Random Saturn on load screen</td><td class="center yes">Yes</td><td class="center yes">Yes</td><td class="center yes">Yes</td><td class="center yes">Yes</td></tr>

							<tr><td>Title banners on load screen</td><td class="center yes">Yes</td><td class="center yes">Yes</td><td class="center yes">Yes</td><td class="center yes">Yes</td></tr>

							<tr><td>Saturn planet dot counts</td><td class="center">1280</td><td class="center">768</td><td class="center">1280</td><td class="center">1280</td></tr>

							<tr><td>Saturn ring dot counts</td><td class="center">1280</td><td class="center">819</td><td class="center">1280</td><td class="center">1280</td></tr>

							<tr><td>Saturn dot plotting logic</td><td class="center">OR</td><td class="center">Overwrite</td><td class="center">OR</td><td class="center">OR</td></tr>

							<tr><td>TINA hook</td><td class="center no">No</td><td class="center no">No</td><td class="center no">No</td><td class="center no">No</td></tr>

							<tr><td>Joystick support</td><td class="center yes">Yes</td><td class="center yes">Yes</td><td class="center yes">Yes</td><td class="center no">No</td></tr>

							<tr><td>Bitstik support</td><td class="center no">No</td><td class="center yes">Yes</td><td class="center no">No</td><td class="center no">No</td></tr>

							<tr><td>Loading pause on launch/dock</td><td class="center no">No</td><td class="center yes">Yes</td><td class="center yes">Yes</td><td class="center no">No</td></tr>
						</table>
					</div>

					<div class="codeBlock article">
						<p>As well as the list above, the Compendium version of Acorn Electron Elite has the following Compendium-specific features:</p>

						<ul>
							<li>Flicker-free ships</li>

							<li>Flicker-free planets</li>

							<li>Trumbles</li>

							<li>Docking computer improvements</li>

							<li>Fuel scoop improvements</li>

							<li>Joystick improvements</li>
						</ul>

						<p>Read <a href="elite_compendium.html">about the Elite Compendium</a> for more information on these extra features.</p>
					</div>
				</div>

				<div class="codeBlockWrapper nav">
					<nav class="codeBlock previousNext"><a class="previous" rel="prev" title="Previous page" href="elite_compendium_acorn_electron_downloads.html">Playing the Compendium version of Electron Elite</a><a class="next" rel="next" title="Next page" href="teletext_elite.html">Teletext Elite</a></nav>
				</div>
			</article>

<?php
include("../templates_local/navigation.php");
?>
		</div>
	</body>
</html>
