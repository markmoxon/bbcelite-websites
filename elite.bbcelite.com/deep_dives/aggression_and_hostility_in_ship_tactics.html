<?php
include_once("../templates/template_functions.php");
page_header("deep_dives", "aggression_and_hostility_in_ship_tactics.html", "Aggression and hostility in ship tactics", "Aggression and hostility in ship tactics", "A deep dive into aggression levels and the hostile flag in Elite on the 6502", "elite", "deep_dives_tactics_and_combat", "aggression_and_hostility_in_ship_tactics");
?>
				<div class="codeBlockWrapper nav">
					<nav class="codeBlock previousNext"><a class="previous" rel="prev" title="Previous deep dive" href="advanced_tactics_with_the_newb_flags.html">Advanced tactics with the NEWB flags</a><a class="next" rel="next" title="Next deep dive" href="the_3d_scanner.html">The 3D scanner</a></nav>
				</div>

				<div class="codeBlockWrapper">
					<div class="codeBlock article">
						<h2 class="articleSubheader deepDive">Why some ships are peaceful traders while others seem hell-bent on revenge</h2>

						<p>In Elite, it can feel as if everyone is out to get you. Supposedly peaceful trading runs rarely go without a hitch, and the onslaught of pirates and bounty hunters is incessant in the dodgier backwaters of the galaxy.</p>

						<p>This is, of course, the whole point of a game whose very name is an indication of your combat prowess (see the deep dive on <a href="combat_rank.html">combat rank</a> for the gory details). But there are some inhabitants of the galaxy who aren't as aggressive; Transporters and Shuttles plu their trade between the stations and planets, minding their own business so intently that even a wayward Cobra Mk III can't shake them from their course. And in deep space there are peaceful Anacondas travelling the trade routes, armed with fleets of defensive Worms that they'll only deploy if you strike first.</p>

						<p>So some ships are peaceful, some are mildly aggressive and some are downright hostile. Let's see how Elite implemented this simple but effective part of the ship tactics.</p>

						<h2 class="articleSubheader">Aggression levels in the standard versions<br>
													 ------------------------------------------</h2>

						<p>Interestingly, in the BBC Micro cassette and Acorn Electron versions of Elite, everyone <i>is</i> out to get you - quite literally. It's just that some ships are not very aggressive, while others are itching for a fight. The tactics system is fairly simple in these standard versions of Elite, with the more subtle behaviour being introduced in the enhanced versions, starting with the BBC Micro disc version.</p>

						<p>In the standard versions of Elite there is no concept of hostility (that comes later, with the NEWB flags, which we discuss in the next section). Instead, all we have is byte #32 of the ship data flags, which contains an aggression level in the range 0 to 63, along with AI and E.C.M. flags. In all versions of Elite, when we attack a ship, it gets its AI flag enabled (so that it wakes up if it's slumbering), and the aggression level then determines how keen it is to turn towards us, with more aggressive ships being more likely to turn to attack, while non-aggressive ships just ignore being shot at (beyond being given a quick kick of turning and acceleration in the ANGRY routine).</p>


In cassette, all ships are effectively hostile, and all of them may turn towards us or fire at us - the only difference is aggression level, i.e. the chances of doing this
Traders are always Cobra (trader) spawned in main game loop 1 with random aggression 0-63
Pirates are Sidewinder or Mamba are spawned in main game loop 4 using Ze (i.e. random 32-63)
BH are Mamba, Python, Cobra (BH) and are spawned the same
Thargoid is 63, spawned in main game loop 4 using GTHG
So they all turn towards us and fire eventually, just some more than others

COPS?

						<p>That's it - there is no concept of hostility outside of missiles and space stations, as that came along later with the NEWB flags. In all versions, the hostility flag for missiles is in bit 6 of byte #32; in the standard versions, the hostility flag for space stations is in bit 7. In the enhanced versions, NEWB stores the hostility status for the space station, and bit 7 of byte #32 for the station is always set to indicate AI is enabloed, so tactics always get applied.</p>


						<h2 class="articleSubheader">Aggression levels and hostility with the NEWB flags<br>
													 ---------------------------------------------------</h2>

What makes ships fire at us - is it hostility? In standard versions?

In disc, only ships that are NEWB hostile do the turning to attack thing, so behaviour is controlled by NEWB in TACTICS 3

(Copy TACTICS 3 logic summary here)

Part 2:

\   * If this is a missile, jump up to the missile code in part 1
\
\   * If this is the space station and it is hostile, consider spawning a cop
\     (6.2% chance, up to a maximum of seven) and we're done
\
\   * If this is the space station and it is not hostile, consider spawning
\     (0.8% chance if there are no Transporters around) a Transporter or Shuttle
\     (equal odds of each type) and we're done
\
\   * If this is a rock hermit, consider spawning (22% chance) a highly
\     aggressive and hostile Sidewinder, Mamba, Krait, Adder or Gecko (equal
\     odds of each type) and we're done
\
\   * Recharge the ship's energy banks by 1



\   * If this is a lone Thargon without a mothership, set it adrift aimlessly
\     and we're done
\
\   * If this is a trader, 80% of the time we're done, 20% of the time the
\     trader performs the same checks as the bounty hunter
\
\   * If this is a bounty hunter (or one of the 20% of traders) and we have been
\     really bad (i.e. a fugitive or serious offender), the ship becomes hostile
\     (if it isn't already)
\
\   * If the ship is not hostile, then either perform docking manoeuvres (if
\     it's docking) or fly towards the planet (if it isn't docking) and we're
\     done
\
\   * If the ship is hostile, and a pirate, and we are within the space station
\     safe zone, stop the pirate from attacking by removing all its aggression
\
\   * Calculate the dot product of the ship's nose vector (i.e. the direction it
\     is pointing) with the vector between us and the ship. This value will help
\     us work out later on whether the enemy ship is pointing towards us, and
\     therefore whether it can hit us with its lasers.






					</div>
				</div>

				<div class="codeBlockWrapper nav">
					<nav class="codeBlock previousNext"><a class="previous" rel="prev" title="Previous deep dive" href="advanced_tactics_with_the_newb_flags.html">Advanced tactics with the NEWB flags</a><a class="next" rel="next" title="Next deep dive" href="the_3d_scanner.html">The 3D scanner</a></nav>
				</div>
			</article>

<?php
include_once("../templates_local/navigation.php");
?>
		</div>
	</body>
</html>
