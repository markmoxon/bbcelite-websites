<?php
include_once("../../templates/template_functions.php");
page_header("", "releases.html", "Different variants of the BBC Micro cassette version of Elite", "Different variants of the BBC Micro cassette version", "An article covering the different variants of the BBC Micro cassette version of Elite", "elite-alias", "cassette_sources", "releases");
?>
				<!-- Start of article -->
				<div class="codeBlockWrapper nav">
					<nav class="codeBlock previousNext"><a class="previous" rel="prev" title="Previous routine" href="/cassette/">Information on the BBC Micro cassette version</a><a class="next" rel="next" title="Next page" href="articles/map_of_the_source_code.html">Map of the source code</a></nav>
				</div>

				<div class="codeBlockWrapper">
					<div class="codeBlock article">
						<p>This site contains the source code for three different variants of the BBC Micro cassette version of Elite:</p>

						<ul>
							<li>The <a href="#sth">variant from the Stairway to Hell archive</a></li>

							<li>The <a href="#source-disc">variant produced by the original source discs from Ian Bell's site</a></li>

							<li>The <a href="#text-sources">variant built from the text sources from the same site</a></li>
						</ul>

						<p>It turns out that the BASIC source files found on the original source disc on Ian Bell's site are slightly different to the text source files on the same site, hence the first two different variants.</p>

						<p>See below for comprehensive details of the differences between the variants, along with links to the relevant bits of the source code.</p>

						<p>All these differences are implemented within the source code using BeebAsm IF statements, which determine which variant is compiled. These IF statements check the values of the relevant source code variables (_SOURCE_DISC, _TEXT_SOURCES and _STH_CASSETTE), which are themselves set by parameters to the build command (such as variant=executive). See the <a href="https://github.com/markmoxon/elite-source-code-bbc-micro-cassette">associated repository</a> for more about building different variants from the source.</p>

						<p>To play Elite with an SSD disc image, load the disc image into drive 0 and press SHIFT-BREAK. To play Elite with a UEF tape image, load the image into the cassette player and enter CHAIN "ELITE".</p>

						<h2 class="articleSubheader"><a id="sth" name="sth" class="anchor"></a>The Stairway to Hell variant<br />
						                             ----------------------------</h2>

						<p>The <a href="http://www.stairwaytohell.com/bbc/archive/tapeimages/reclist.php?sort=name&filter=Elite">variant in the Stairway to Hell archive</a> appears to be the original Acornsoft cassette release, with the full galactic hyperspace bug fix.</p>

						<table class="spacedTableBorder codeSummary">
							<tr><td>Default build in repository</td><td>Yes</td></tr>
							<tr><td>Product details</td><td>Acornsoft SBG38</td></tr>
							<tr><td>Date</td><td>1984</td></tr>
							<tr><td>Build command parameter</td><td>variant=sth (optional)</td></tr>
							<tr><td>Source code variable</td><td>_STH_CASSETTE</td></tr>
							<tr><td>Verification checksums (crc32)</td><td>See the <a href="https://github.com/markmoxon/elite-source-code-bbc-micro-cassette#building-the-stairway-to-hell-variant">GitHub repository</a></td></tr>
							<tr><td>Download SSD disc image</td><td><a href="/versions/elite/elite-cassette-sth.ssd">Original</a>, <a href="/versions/flicker_free_elite/elite-cassette-flicker-free-sth.ssd">Flicker-free</a></td></tr>
							<tr><td>Download UEF tape image</td><td><a href="/versions/elite/elite-cassette-sth.uef">Original</a>, <a href="/versions/flicker_free_elite/elite-cassette-flicker-free-sth.uef">Flicker-free</a></td></tr>
							<tr><td>Play this variant online</td><td><a href="https://bbc.xania.org/?autoboot&amp;disc=https://elite.bbcelite.com/versions/elite/elite-cassette-sth.ssd">Original</a>, <a href="https://bbc.xania.org/?autoboot&amp;disc=https://elite.bbcelite.com/versions/flicker_free_elite/elite-cassette-flicker-free-sth.ssd">Flicker-free</a></td></tr>
						</table>

						<p>It has the following features that differentiate it from the other variants:</p>

						<ul>
							<li>The galactic hyperdrive routine contains an extra JSR TT111 instruction in the <a href="/cassette/main/subroutine/ghy.html">Ghy</a> routine, just after the coordinates are set to (96, 96), which finds the nearest system to those coordinates and sets that as the current system. It also contains instructions to set the distance to the selected system in QQ8(1 0) to 0. This means that the Stairway to hell variant contains the full bug fix that appears in other versions, rather than the incomplete JSR TT111 fix in the text sources. See the <a href="/compare/main/subroutine/ghy.html">code variations for Ghy</a> for details.</li>

							<li>This variant is otherwise identical to the text sources variant.</li>
						</ul>

						<h2 class="articleSubheader"><a id="source-disc" name="source-disc" class="anchor"></a>Ian Bell's source disc<br />
						                             ----------------------</h2>

						<p>The <a href="http://www.elitehomepage.org/bbc/">source disc from Ian Bell's site</a> produces an early version of the game that contains a minor bug in the galactic hyperspace. The binaries produced may match the very first Acornsoft release of BBC Micro cassette Elite but investigations in this area are ongoing.</p>

						<table class="spacedTableBorder codeSummary">
							<tr><td>Default build in repository</td><td>No</td></tr>
							<tr><td>Product details</td><td>-</td></tr>
							<tr><td>Date</td><td>1984</td></tr>
							<tr><td>Build command parameter</td><td>variant=source-disc</td></tr>
							<tr><td>Source code variable</td><td>_SOURCE_DISC</td></tr>
							<tr><td>Verification checksums (crc32)</td><td>See the <a href="https://github.com/markmoxon/elite-source-code-bbc-micro-cassette#building-the-text-sources-variant">GitHub repository</a></td></tr>
							<tr><td>Download SSD disc image</td><td><a href="/versions/elite/elite-cassette-from-source-disc.ssd">Original</a>, <a href="/versions/flicker_free_elite/elite-cassette-flicker-free-from-source-disc.ssd">Flicker-free</a></td></tr>
							<tr><td>Play this variant online</td><td><a href="https://bbc.xania.org/?autoboot&amp;disc=https://elite.bbcelite.com/versions/elite/elite-cassette-from-source-disc.ssd">Original</a>, <a href="https://bbc.xania.org/?autoboot&amp;disc=https://elite.bbcelite.com/versions/flicker_free_elite/elite-cassette-flicker-free-from-source-disc.ssd">Flicker-free</a></td></tr>
						</table>

						<p>It has the following features that differentiate it from the other variants:</p>

						<ul>
							<li>There is a bug in the galactic hyperdrive routine where the galactic hyperdrive will take us to coordinates (96, 96) in the new galaxy, even if there isn't actually a system there, so if we jump when we are low on fuel, it is possible to get stuck in the middle of nowhere when changing galaxy (see <a href="/cassette/main/subroutine/ghy.html">Ghy</a>).</li>

							<li>In later variants, some efficiencies were made to enable a bug fix to be added, which are missing from this early version (see <a href="/cassette/main/subroutine/warp.html">WARP</a> and <a href="/cassette/main/subroutine/killshp.html">KILLSHP</a>).</li>

							<li>The TTX66 routine, which is called when we change space view, stops laser pulsing by setting LASCT to 0, rather than resetting LAS2 as in later variants (see <a href="/cassette/main/subroutine/ttx66.html">TTX66</a>).</li>
						</ul>

						<h2 class="articleSubheader"><a id="text-sources" name="text-sources" class="anchor"></a>Ian Bell's text sources<br />
						                             -----------------------</h2>

						<p>The <a href="http://www.elitehomepage.org/bbc/">text files containing the source</a>, also from Ian Bell's site, produce a different binary to the original source disc. This variant contains some refinements that were retained in the other versions of Elite, so it looks like this might be a later development than the source disc variant. Whether or not it was ever released is not yet known.</p>

						<table class="spacedTableBorder codeSummary">
							<tr><td>Default build in repository</td><td>No</td></tr>
							<tr><td>Product details</td><td>-</td></tr>
							<tr><td>Date</td><td>1984</td></tr>
							<tr><td>Build command parameter</td><td>variant=text-sources</td></tr>
							<tr><td>Source code variable</td><td>_TEXT_SOURCES</td></tr>
							<tr><td>Verification checksums (crc32)</td><td>See the <a href="https://github.com/markmoxon/elite-source-code-bbc-micro-cassette#building-the-source-disc-variant">GitHub repository</a></td></tr>
							<tr><td>Download SSD disc image</td><td><a href="/versions/elite/elite-cassette-from-text-sources.ssd">Original</a>, <a href="/versions/flicker_free_elite/elite-cassette-flicker-free-from-text-sources.ssd">Flicker-free</a></td></tr>
							<tr><td>Play this variant online</td><td><a href="https://bbc.xania.org/?autoboot&amp;disc=https://elite.bbcelite.com/versions/elite/elite-cassette-from-text-sources.ssd">Original</a>, <a href="https://bbc.xania.org/?autoboot&amp;disc=https://elite.bbcelite.com/versions/flicker_free_elite/elite-cassette-flicker-free-from-text-sources.ssd">Flicker-free</a></td></tr>
						</table>

						<p>It has the following features that differentiate it from the other variants:</p>

						<ul>
							<li>The galactic hyperdrive routine contains an extra JSR TT111 instruction at the start of the <a href="/cassette/main/subroutine/ghy.html">Ghy</a> routine, which sets the current system to the nearest system. There is a bug in the source disc variant where the galactic hyperdrive will take us to coordinates (96, 96) in the new galaxy, even if there isn't actually a system there, so if we jump when we are low on fuel, it is possible to get stuck in the middle of nowhere when changing galaxy. The Stairway to Hell variant contains a fix for this bug that involves adding an extra JSR TT111 instruction just after the coordinates are set to (96, 96), and then setting the distance to the selected system in QQ8(1 0) to 0; this fix finds the nearest system to those coordinates and sets that as the current system, making sure the distances are correctly wet. The original source discs don't contain this fix at all, and the text sources contain only part of this fix; the extra JSR TT111 instruction is there, but it's in the wrong place, as the fix only works if it's done after the new coordinates are set, not before. So this variant appears to contain an early stab at fixing the bug, which was then finished off in the Stairway to Hell variant. See the <a href="/compare/main/subroutine/ghy.html">code variations for Ghy</a> for details.</li>

							<li>In order to fit this extra call in (which takes three extra bytes), the text sources also contain four modifications that create space for the call, which together save five bytes (see <a href="/cassette/main/subroutine/warp.html">WARP</a> and <a href="/cassette/main/subroutine/killshp.html">KILLSHP</a>).</li>

							<li>The TTX66 routine, which is called when we change space view, stops laser pulsing by setting LAS2 to 0 instead of LASCT, which is slightly more efficient (see <a href="/cassette/main/subroutine/ttx66.html">TTX66</a>).</li>
						</ul>

						<p>All these changes are carried through to all other versions of the game (although the Ghy modification moves to later in the routine in the other versions), so it looks like the text sources contain a slightly later variant of the game than the source disc, with the Stairway to Hell variant following on after the test sources.</p>
					</div>
				</div>

				<div class="codeBlockWrapper nav">
					<nav class="codeBlock previousNext"><a class="previous" rel="prev" title="Previous routine" href="/cassette/">Information on the BBC Micro cassette version</a><a class="next" rel="next" title="Next page" href="articles/map_of_the_source_code.html">Map of the source code</a></nav>
				</div>
				<!-- End of article -->
			</article>

<?php
include("../../templates_local/navigation.php");
?>
		</div>
	</body>
</html>
