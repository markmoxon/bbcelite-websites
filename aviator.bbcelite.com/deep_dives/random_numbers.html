<?php
include_once("../templates/template_functions.php");
page_header("deep_dives", "random_numbers.html", "Random numbers", "Random numbers", "A deep dive into random numbers in BBC Micro Aviator", "aviator", "deep_dives_maths", "random_numbers");
?>
				<div class="codeBlockWrapper nav">
					<nav class="codeBlock previousNext"><a class="previous" rel="prev" title="Previous deep dive" href="trigonometry.html">Trigonometry</a><a class="next" rel="next" title="Next deep dive" href="the_key_logger.html">The key logger</a></nav>
				</div>

				<div class="codeBlockWrapper">
					<div class="codeBlock article">
						<h2 class="articleSubheader deepDive">How Aviator generates random numbers</h2>

						<p>Randomness is an essential part of gaming, and in particular simulation; if a simulator's behaviour is predictable, it feels less like a simulation and more like a computer program.</p>

						<p>Aviator uses a common method of adding a random element to the code: it reads the 6522 User VIA's timer, and specifically the T1C-L timer 1 low-order counter, which is mapped to memory in SHEILA &amp;64. This timer decrements one million times a second, so assuming it is read in a fairly asynchronous manner, the result will normally be a pretty random number.</p>

						<p>This approach is used in the following places:</p>

						<ul>
							<li>The <a href="/source/main/subroutine/spawnalien.html">SpawnAlien</a> routine uses the VIA timer to pick a random field for spawning each alien when creating a new wave of aliens.</li>

							<li>The bumpy ride that is simulated in <a href="/source/main/subroutine/processlanding_part_1_of_7.html">ProcessLanding</a> when performing an emergency landing uses the VIA timer to decide which way to roll the aircraft.</li>

							<li>The <a href="/source/main/subroutine/applybumpyride.html">ApplyBumpyRide</a> routine uses the VIA timer to calculate a random amount in the range 0 to zVelocityPHi, which is then applied to the plane's roll or altitude (so the faster the plane, the bumpier the ride, but in a random way).</li>

							<li>The <a href="/source/main/subroutine/setrandomnumber.html">SetRandomNumber</a> routine adds a new random number to the randomNumbers list, using the VIA timer to generate the new number.</li>
						</ul>

						<p>The random numbers generated by the SetRandomNumber routine are read by the <a href="/source/main/subroutine/nextrandomnumber.html">NextRandomNumber</a> routine. This is done in the following places:</p>

						<ul>
							<li>When turbulence is calculated in <a href="/source/main/subroutine/applyflightmodel_part_3_of_7.html">part 3 of the ApplyFlightModel routine</a> following an alien explosion, it pulls random numbers from the list to help calculate the turbulence to apply to the three flight control axes.</li>

							<li>The <a href="/source/main/subroutine/explodealien.html">ExplodeAlien</a> routine pulls random numbers from the list when moving the alien's points around, so it explodes in an unpredictable fashion.</li>
						</ul>

						<p>See the deep dive on <a href="explosions_and_turbulence.html">explosions and turbulence</a> for more details on the explosion process.</p>

						<p>Interestingly, no random numbers are used when working out the alien's tactics for attacking the town; aliens are completely predictable, it seems. See the deep dive on <a href="aliens_attack_acornsville.html">Aliens attack Acornsville!</a> for more details on aliens and their habits.</p>
					</div>
				</div>

				<div class="codeBlockWrapper nav">
					<nav class="codeBlock previousNext"><a class="previous" rel="prev" title="Previous deep dive" href="trigonometry.html">Trigonometry</a><a class="next" rel="next" title="Next deep dive" href="the_key_logger.html">The key logger</a></nav>
				</div>
			</article>

<?php
include_once("../templates_local/navigation.php");

?>
		</div>
	</body>
</html>
